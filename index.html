<!DOCTYPE html>
<html lang="en">
<head>
    <script id="usercentrics-cmp" src="https://app.usercentrics.eu/browser-ui/latest/loader.js" data-settings-id="a3DQIzZOn3L2xn" async></script>
    <script id="Cookiebot" src="https://consent.cookiebot.com/uc.js" data-cbid="d7475e39-114e-4546-b577-2d3570ff4663" type="text/javascript"></script>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-898B8Z3X68"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-898B8Z3X68');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CVCraft Pro - Professional CV Builder</title>
    <meta name="google-adsense-account" content="ca-pub-">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><defs><linearGradient id='grad' x1='0%25' y1='0%25' x2='100%25' y2='100%25'><stop offset='0%25' style='stop-color:%23f39c12;stop-opacity:1' /><stop offset='100%25' style='stop-color:%23e67e22;stop-opacity:1' /></linearGradient></defs><circle cx='50' cy='50' r='45' fill='url(%23grad)'/><text x='50' y='60' font-family='Arial,sans-serif' font-size='32' font-weight='900' fill='white' text-anchor='middle'>CV</text></svg>" type="image/svg+xml">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            transition: all 0.3s ease;
            letter-spacing: -0.01em;
        }

        body.dark-mode {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
        }

        body.dark-mode .container {
            background: #2c2c54;
            color: #e0e0e0;
        }

        body.dark-mode .form-section {
            background: #40407a;
            border-right: 1px solid #706fd3;
        }

        body.dark-mode .form-group label {
            color: #e0e0e0;
        }

        body.dark-mode .form-group input,
        body.dark-mode .form-group textarea {
            background: #2c2c54;
            border: 2px solid #706fd3;
            color: #e0e0e0;
        }

        body.dark-mode .form-group input:focus,
        body.dark-mode .form-group textarea:focus {
            border-color: #3742fa;
            box-shadow: 0 0 0 3px rgba(55, 66, 250, 0.1);
        }

        body.dark-mode .template-btn {
            background: #2c2c54;
            border: 2px solid #706fd3;
            color: #e0e0e0;
        }

        body.dark-mode .template-btn.active,
        body.dark-mode .template-btn:hover {
            background: #3742fa;
            border-color: #3742fa;
        }

        /* Navigation Bar */
        .navbar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(44, 62, 80, 0.95);
            backdrop-filter: blur(10px);
            padding: 15px 0;
            z-index: 1000;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .navbar-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
        }

        .navbar-brand {
            display: flex;
            align-items: center;
            gap: 10px;
            color: white;
            text-decoration: none;
            font-size: 1.5rem;
            font-weight: 700;
        }

        .navbar-brand .logo-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #f39c12, #e67e22);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 15px rgba(243, 156, 18, 0.4);
            position: relative;
            overflow: hidden;
            font-weight: 900;
            font-size: 18px;
            color: white;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }
        
        .navbar-brand .logo-icon::before {
            content: 'CV';
            font-family: 'Inter', sans-serif;
            font-weight: 900;
            font-size: 14px;
            letter-spacing: -1px;
        }
        
        .navbar-brand:hover .logo-icon {
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
        }

        .navbar-nav {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .nav-link {
            color: white;
            text-decoration: none;
            padding: 8px 16px;
            border-radius: 20px;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .nav-link:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-1px);
        }

        .nav-link.active {
            background: linear-gradient(135deg, #3498db, #2980b9);
        }

        .user-menu {
            position: relative;
            display: inline-block;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, #3498db, #2980b9);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .user-avatar:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 15px rgba(52, 152, 219, 0.4);
        }

        .user-dropdown {
            position: absolute;
            top: 50px;
            right: 0;
            background: white;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            min-width: 200px;
            display: none;
            overflow: hidden;
        }

        body.dark-mode .user-dropdown {
            background: #2c2c54;
            border: 1px solid #706fd3;
        }

        .user-dropdown a {
            display: block;
            padding: 12px 20px;
            color: #2c3e50;
            text-decoration: none;
            transition: all 0.3s ease;
            border-bottom: 1px solid #f8f9fa;
        }

        body.dark-mode .user-dropdown a {
            color: #e0e0e0;
            border-bottom: 1px solid #40407a;
        }

        .user-dropdown a:hover {
            background: #f8f9fa;
            padding-left: 25px;
        }

        body.dark-mode .user-dropdown a:hover {
            background: #40407a;
        }

        .user-dropdown a:last-child {
            border-bottom: none;
        }

        .theme-toggle {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            border-radius: 50px;
            padding: 8px 12px;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-left: 10px;
        }

        .theme-toggle:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-1px);
        }

        /* Auth Modal Styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            backdrop-filter: blur(5px);
        }

        .modal {
            background: white;
            border-radius: 20px;
            padding: 40px;
            max-width: 450px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            transform: scale(0.9);
            transition: all 0.3s ease;
        }

        .modal-overlay.active {
            display: flex;
        }

        .modal-overlay.active .modal {
            transform: scale(1);
        }

        body.dark-mode .modal {
            background: #2c2c54;
            color: #e0e0e0;
        }

        .modal-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .modal-header h2 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.8rem;
            font-weight: 600;
        }

        body.dark-mode .modal-header h2 {
            color: #e0e0e0;
        }

        .modal-header p {
            color: #666;
            font-size: 0.95rem;
        }

        body.dark-mode .modal-header p {
            color: #bbb;
        }

        .auth-tabs {
            display: flex;
            margin-bottom: 30px;
            background: #f8f9fa;
            border-radius: 10px;
            padding: 5px;
        }

        body.dark-mode .auth-tabs {
            background: #40407a;
        }

        .auth-tab {
            flex: 1;
            padding: 12px;
            text-align: center;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            color: #666;
        }

        body.dark-mode .auth-tab {
            color: #bbb;
        }

        .auth-tab.active {
            background: white;
            color: #2c3e50;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        body.dark-mode .auth-tab.active {
            background: #2c2c54;
            color: #e0e0e0;
        }

        .auth-form {
            display: none;
        }

        .auth-form.active {
            display: block;
        }

        .close-modal {
            position: absolute;
            top: 20px;
            right: 20px;
            background: none;
            border: none;
            font-size: 1.5rem;
            color: #999;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .close-modal:hover {
            color: #e74c3c;
            transform: scale(1.1);
        }

        /* Dashboard Styles */
        .dashboard {
            display: none;
            padding-top: 80px;
        }

        .dashboard.active {
            display: block;
        }

        .dashboard-header {
            background: linear-gradient(135deg, #2c3e50, #3498db);
            color: white;
            padding: 40px 20px;
            text-align: center;
        }

        .dashboard-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }

        .dashboard-card {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }

        body.dark-mode .dashboard-card {
            background: #2c2c54;
            color: #e0e0e0;
        }

        .dashboard-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.15);
        }

        .dashboard-card h3 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.3rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        body.dark-mode .dashboard-card h3 {
            color: #e0e0e0;
        }

        .dashboard-card i {
            color: #3498db;
            font-size: 1.5rem;
        }

        .cv-history-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
            margin-bottom: 10px;
            transition: all 0.3s ease;
        }

        body.dark-mode .cv-history-item {
            background: #40407a;
        }

        .cv-history-item:hover {
            background: #e9ecef;
            transform: translateX(5px);
        }

        body.dark-mode .cv-history-item:hover {
            background: #706fd3;
        }

        .payment-history-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            border-left: 4px solid #27ae60;
            background: #f8f9fa;
            border-radius: 0 10px 10px 0;
            margin-bottom: 10px;
        }

        body.dark-mode .payment-history-item {
            background: #40407a;
        }

        .status-badge {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        .status-success {
            background: #d4edda;
            color: #155724;
        }

        .status-pending {
            background: #fff3cd;
            color: #856404;
        }

        body.dark-mode .status-success {
            background: #27ae60;
            color: white;
        }

        body.dark-mode .status-pending {
            background: #f39c12;
            color: white;
        }

        .chatbot-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
        }

        .chatbot-toggle {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, #3498db, #2980b9);
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            box-shadow: 0 4px 20px rgba(52, 152, 219, 0.4);
            transition: all 0.3s ease;
        }

        .chatbot-toggle:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 25px rgba(52, 152, 219, 0.6);
        }

        .chatbot-window {
            position: absolute;
            bottom: 70px;
            right: 0;
            width: 350px;
            height: 400px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            display: none;
            flex-direction: column;
            overflow: hidden;
        }

        body.dark-mode .chatbot-window {
            background: #2c2c54;
            color: #e0e0e0;
        }

        .chatbot-header {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 15px;
            font-weight: 600;
            text-align: center;
        }

        .chatbot-messages {
            flex: 1;
            padding: 15px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .chatbot-message {
            max-width: 80%;
            padding: 10px 15px;
            border-radius: 15px;
            word-wrap: break-word;
        }

        .chatbot-message.user {
            background: #3498db;
            color: white;
            align-self: flex-end;
            border-bottom-right-radius: 5px;
        }

        .chatbot-message.bot {
            background: #ecf0f1;
            color: #2c3e50;
            align-self: flex-start;
            border-bottom-left-radius: 5px;
        }

        body.dark-mode .chatbot-message.bot {
            background: #40407a;
            color: #e0e0e0;
        }

        .chatbot-input-container {
            padding: 15px;
            border-top: 1px solid #ecf0f1;
            display: flex;
            gap: 10px;
        }

        body.dark-mode .chatbot-input-container {
            border-top: 1px solid #706fd3;
        }

        .chatbot-input {
            flex: 1;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 20px;
            outline: none;
        }

        body.dark-mode .chatbot-input {
            background: #40407a;
            border: 1px solid #706fd3;
            color: #e0e0e0;
        }

        .chatbot-send {
            background: #3498db;
            color: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
            margin-top: 80px;
            display: none;
        }

        .container.active {
            display: block;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50, #3498db);
            color: white;
            padding: 40px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="2" fill="rgba(255,255,255,0.1)"/></svg>') repeat;
            animation: float 20s infinite linear;
        }

        @keyframes float {
            0% { transform: translateX(0) translateY(0); }
            100% { transform: translateX(-50px) translateY(-50px); }
        }

        .header-content {
            position: relative;
            z-index: 1;
        }

        .header h1 {
            font-size: 3rem;
            margin-bottom: 15px;
            font-weight: 700;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.95;
            margin-bottom: 20px;
        }

        .header-stats {
            display: flex;
            justify-content: center;
            gap: 40px;
            margin-top: 30px;
        }

        .stat-item {
            text-align: center;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            display: block;
            color: #ecf0f1;
        }

        .stat-label {
            font-size: 0.9rem;
            opacity: 0.8;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0;
            min-height: 800px;
        }

        .form-section {
            padding: 40px;
            background: #f8f9fa;
            border-right: 1px solid #e9ecef;
        }

        .preview-section {
            padding: 40px;
            background: white;
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2c3e50;
            font-size: 0.95rem;
        }

        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.3s ease;
            font-family: inherit;
        }

        .form-group input:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        .form-group textarea {
            resize: vertical;
            min-height: 100px;
            word-wrap: break-word;
            overflow-wrap: break-word;
        }

        .template-selector {
            margin-bottom: 30px;
        }

        .template-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .template-btn {
            padding: 12px 20px;
            border: 2px solid #3498db;
            background: white;
            color: #3498db;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .template-btn.active,
        .template-btn:hover {
            background: #3498db;
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }

        .download-btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 20px;
        }

        .download-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(46, 204, 113, 0.3);
        }

        .cv-preview {
            border: 1px solid #e9ecef;
            border-radius: 10px;
            min-height: 600px;
            background: white;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        /* Classic Template */
        .template-classic {
            padding: 20px;
            font-family: 'Times New Roman', serif;
            line-height: 1.6;
            color: #333;
            word-wrap: break-word;
            overflow-wrap: break-word;
        }

        .template-classic .cv-header {
            text-align: center;
            border-bottom: 2px solid #333;
            padding-bottom: 20px;
            margin-bottom: 30px;
        }

        .template-classic .cv-name {
            font-size: 1.8rem;
            font-weight: bold;
            margin-bottom: 10px;
            color: #2c3e50;
        }

        .template-classic .cv-contact {
            font-size: 1rem;
            color: #666;
        }

        .template-classic .cv-photo {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            object-fit: cover;
            margin: 0 auto 20px;
            display: block;
            border: 3px solid #2c3e50;
        }

        .template-classic .cv-section {
            margin-bottom: 25px;
        }

        .template-classic .cv-section-title {
            font-size: 1.3rem;
            font-weight: bold;
            color: #2c3e50;
            border-bottom: 1px solid #ccc;
            padding-bottom: 5px;
            margin-bottom: 15px;
        }

        /* Modern Template */
        .template-modern {
            padding: 0;
            font-family: 'Arial', sans-serif;
            display: grid;
            grid-template-columns: 1fr 2fr;
            min-height: 600px;
        }

        .template-modern .cv-sidebar {
            background: #2c3e50;
            color: white;
            padding: 20px 15px;
        }

        .template-modern .cv-main {
            padding: 20px;
            background: white;
        }

        .template-modern .cv-name {
            font-size: 1.5rem;
            font-weight: 300;
            margin-bottom: 20px;
            text-align: center;
        }

        .template-modern .cv-contact {
            font-size: 0.9rem;
            margin-bottom: 30px;
            text-align: center;
        }

        .template-modern .cv-section-title {
            font-size: 1.1rem;
            font-weight: bold;
            margin-bottom: 15px;
            color: #3498db;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .template-modern .cv-sidebar .cv-section-title {
            color: #ecf0f1;
        }

        .template-modern .cv-photo {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            object-fit: cover;
            margin: 0 auto 20px;
            display: block;
            border: 3px solid #3498db;
        }

        /* Creative Template */
        .template-creative {
            padding: 0;
            font-family: 'Helvetica', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            position: relative;
            overflow: hidden;
        }

        .template-creative::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 200px;
            height: 200px;
            background: rgba(255,255,255,0.1);
            border-radius: 50%;
            transform: translate(50%, -50%);
        }

        .template-creative .cv-content {
            padding: 20px;
            position: relative;
            z-index: 1;
        }

        .template-creative .cv-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .template-creative .cv-name {
            font-size: 2rem;
            font-weight: 100;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .template-creative .cv-contact {
            font-size: 1rem;
            opacity: 0.9;
        }

        .template-creative .cv-section-title {
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 15px;
            text-transform: uppercase;
            letter-spacing: 2px;
            border-left: 4px solid white;
            padding-left: 15px;
        }

        .template-creative .cv-section {
            margin-bottom: 30px;
            background: rgba(255,255,255,0.1);
            padding: 20px;
            border-radius: 10px;
            backdrop-filter: blur(10px);
        }

        .template-creative .cv-photo {
            width: 130px;
            height: 130px;
            border-radius: 50%;
            object-fit: cover;
            margin: 0 auto 20px;
            display: block;
            border: 4px solid rgba(255,255,255,0.8);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
        }

        /* Professional Template */
        .template-professional {
            padding: 0;
            font-family: 'Georgia', serif;
            background: #f8f9fa;
            border-left: 8px solid #2c3e50;
        }

        .template-professional .cv-header {
            background: #2c3e50;
            color: white;
            padding: 20px;
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .template-professional .cv-photo {
            width: 120px;
            height: 120px;
            border-radius: 10px;
            object-fit: cover;
            border: 4px solid white;
            flex-shrink: 0;
        }

        .template-professional .cv-header-text {
            flex: 1;
        }

        .template-professional .cv-name {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 10px;
            color: white;
        }

        .template-professional .cv-contact {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .template-professional .cv-body {
            padding: 20px;
        }

        .template-professional .cv-section {
            margin-bottom: 20px;
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .template-professional .cv-section-title {
            font-size: 1.4rem;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #3498db;
        }

        /* Premium Template */
        .template-premium {
            padding: 0;
            font-family: 'Georgia', serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            color: #2c3e50;
            position: relative;
            overflow: hidden;
        }

        .template-premium::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 150px;
            height: 150px;
            background: linear-gradient(135deg, rgba(52, 152, 219, 0.1), rgba(155, 89, 182, 0.1));
            border-radius: 50%;
            transform: translate(30%, -30%);
        }

        .template-premium::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100px;
            height: 100px;
            background: linear-gradient(135deg, rgba(46, 204, 113, 0.1), rgba(52, 152, 219, 0.1));
            border-radius: 50%;
            transform: translate(-30%, 30%);
        }

        .template-premium .cv-header {
            background: linear-gradient(135deg, #2c3e50, #34495e);
            color: white;
            padding: 25px 20px;
            position: relative;
            clip-path: polygon(0 0, 100% 0, 100% 85%, 0 100%);
            margin-bottom: 15px;
        }

        .template-premium .cv-header::before {
            content: '';
            position: absolute;
            top: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            border: 2px solid rgba(255,255,255,0.2);
            border-radius: 50%;
        }

        .template-premium .cv-photo {
            width: 120px;
            height: 120px;
            border-radius: 15px;
            object-fit: cover;
            border: 4px solid white;
            box-shadow: 0 15px 35px rgba(0,0,0,0.3);
            margin: 0 auto 25px;
            display: block;
            position: relative;
            z-index: 2;
        }

        .template-premium .cv-name {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 10px;
            text-align: center;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            letter-spacing: 1px;
        }

        .template-premium .cv-contact {
            font-size: 1.1rem;
            text-align: center;
            opacity: 0.95;
            line-height: 1.6;
        }

        .template-premium .cv-body {
            padding: 0 20px 20px;
            position: relative;
            z-index: 1;
        }

        .template-premium .cv-section {
            background: white;
            margin-bottom: 15px;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            border-left: 3px solid #3498db;
            position: relative;
            overflow: hidden;
        }

        .template-premium .cv-section::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, rgba(52, 152, 219, 0.1), rgba(155, 89, 182, 0.1));
            border-radius: 0 15px 0 50px;
        }

        .template-premium .cv-section-title {
            font-size: 1.4rem;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 20px;
            text-transform: uppercase;
            letter-spacing: 1px;
            position: relative;
            padding-bottom: 10px;
        }

        .template-premium .cv-section-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 50px;
            height: 3px;
            background: linear-gradient(135deg, #3498db, #9b59b6);
            border-radius: 2px;
        }

        .template-premium .cv-section-content {
            color: #34495e;
            line-height: 1.7;
            font-size: 1rem;
        }

        /* Executive Template */
        .template-executive {
            padding: 0;
            font-family: 'Georgia', serif;
            background: #f8f9fa;
            border: 1px solid #e9ecef;
        }

        .template-executive .cv-header {
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            color: white;
            padding: 25px 20px;
            text-align: center;
            position: relative;
        }

        .template-executive .cv-header::after {
            content: '';
            position: absolute;
            bottom: -20px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 20px solid transparent;
            border-right: 20px solid transparent;
            border-top: 20px solid #1a1a2e;
        }

        .template-executive .cv-name {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 15px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .template-executive .cv-contact {
            font-size: 1.1rem;
            opacity: 0.9;
            margin-bottom: 20px;
        }

        .template-executive .cv-photo {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            object-fit: cover;
            margin: 0 auto 25px;
            display: block;
            border: 5px solid rgba(255,255,255,0.8);
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .template-executive .cv-body {
            padding: 30px 20px 20px;
        }

        .template-executive .cv-section {
            margin-bottom: 20px;
            background: white;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 3px 15px rgba(0,0,0,0.1);
            border-left: 3px solid #667eea;
        }

        .template-executive .cv-section-title {
            font-size: 1.5rem;
            font-weight: bold;
            color: #1a1a2e;
            margin-bottom: 20px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* Traditional Template */
        .template-traditional {
            padding: 20px;
            font-family: 'Georgia', serif;
            background: white;
            color: #2c3e50;
            line-height: 1.6;
            border: 1px solid #bdc3c7;
        }

        .template-traditional .cv-header {
            text-align: center;
            border-bottom: 3px double #2c3e50;
            padding-bottom: 25px;
            margin-bottom: 30px;
        }

        .template-traditional .cv-photo {
            width: 100px;
            height: 100px;
            border-radius: 5px;
            object-fit: cover;
            border: 2px solid #2c3e50;
            margin: 0 auto 20px;
            display: block;
        }

        .template-traditional .cv-name {
            font-size: 2rem;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .template-traditional .cv-contact {
            font-size: 1rem;
            color: #34495e;
            line-height: 1.5;
            font-style: italic;
        }

        .template-traditional .cv-section {
            margin-bottom: 25px;
        }

        .template-traditional .cv-section-title {
            font-size: 1.3rem;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 12px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            border-bottom: 2px solid #bdc3c7;
            padding-bottom: 5px;
        }

        .template-traditional .cv-section-content {
            color: #2c3e50;
            line-height: 1.6;
            text-align: justify;
        }

        /* ATS Optimized Template */
        .template-ats {
            padding: 40px;
            font-family: 'Arial', sans-serif;
            background: white;
            color: #000;
            line-height: 1.5;
            font-size: 11pt;
        }

        .template-ats .cv-header {
            text-align: left;
            border-bottom: 2px solid #000;
            padding-bottom: 15px;
            margin-bottom: 20px;
        }

        .template-ats .cv-name {
            font-size: 16pt;
            font-weight: bold;
            margin-bottom: 8px;
            color: #000;
            text-transform: uppercase;
        }

        .template-ats .cv-contact {
            font-size: 10pt;
            color: #000;
            line-height: 1.4;
        }

        .template-ats .cv-photo {
            display: none; /* ATS systems prefer no photos */
        }

        .template-ats .cv-section {
            margin-bottom: 20px;
        }

        .template-ats .cv-section-title {
            font-size: 12pt;
            font-weight: bold;
            color: #000;
            margin-bottom: 10px;
            text-transform: uppercase;
            border-bottom: 1px solid #000;
            padding-bottom: 3px;
        }

        .template-ats .cv-section-content {
            font-size: 11pt;
            color: #000;
            line-height: 1.4;
        }

        .template-ats ul {
            margin: 0;
            padding-left: 20px;
        }

        .template-ats li {
            margin-bottom: 3px;
        }

        /* LinkedIn Template */
        .template-linkedin {
            padding: 0;
            font-family: 'Inter', sans-serif;
            background: white;
            color: #000;
            line-height: 1.5;
        }

        .template-linkedin .cv-header {
            background: #0077b5;
            color: white;
            padding: 20px;
            position: relative;
        }

        .template-linkedin .cv-header-content {
            display: flex;
            align-items: center;
            gap: 25px;
        }

        .template-linkedin .cv-photo {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            object-fit: cover;
            border: 4px solid white;
            flex-shrink: 0;
        }

        .template-linkedin .cv-header-text {
            flex: 1;
        }

        .template-linkedin .cv-name {
            font-size: 2.2rem;
            font-weight: 600;
            margin-bottom: 8px;
            color: white;
        }

        .template-linkedin .cv-headline {
            font-size: 1.1rem;
            margin-bottom: 15px;
            color: #e1f5fe;
            font-weight: 400;
        }

        .template-linkedin .cv-contact {
            font-size: 0.95rem;
            color: #e1f5fe;
            line-height: 1.4;
        }

        .template-linkedin .cv-body {
            padding: 20px;
        }

        .template-linkedin .cv-section {
            margin-bottom: 35px;
            border-bottom: 1px solid #e0e0e0;
            padding-bottom: 25px;
        }

        .template-linkedin .cv-section:last-child {
            border-bottom: none;
        }

        .template-linkedin .cv-section-title {
            font-size: 1.4rem;
            font-weight: 600;
            color: #0077b5;
            margin-bottom: 20px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .template-linkedin .cv-section-content {
            color: #333;
            line-height: 1.6;
            font-size: 1rem;
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .template-modern {
                grid-template-columns: 1fr;
            }
            
            .template-modern .cv-sidebar {
                order: 2;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .form-section,
            .preview-section {
                padding: 20px;
            }
        }
        /* ====== Responsive (موبايل) ====== */
@media (max-width: 768px) {
    body {
        font-size: 16px;
        padding: 10px;
    }

    .navbar-content {
        flex-direction: column;
        align-items: flex-start;
        gap: 10px;
    }

    .navbar-nav {
        flex-direction: column;
        gap: 10px;
        width: 100%;
    }

    .nav-link {
        display: block;
        width: 100%;
        text-align: left;
    }

    h1 {
        font-size: 20px;
        text-align: center;
    }
}

    </style>
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar">
        <div class="navbar-content">
            <a href="#" class="navbar-brand" onclick="showHome()">
                <div class="logo-icon"></div>
                <span style="font-weight: 700; background: linear-gradient(135deg, #667eea, #764ba2); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">CVCraft Pro</span>
            </a>
            <div class="navbar-nav">
                <a href="#" class="nav-link" onclick="showHome()" data-translate="home">Home</a>
                <a href="#" class="nav-link" onclick="showFeatures()" data-translate="features">Features</a>
                <div class="user-menu" id="userMenu" style="display: none;">
                    <div class="user-avatar" onclick="toggleUserMenu()" id="userAvatar">JD</div>
                    <div class="user-dropdown" id="userDropdown">
                        <a href="#" onclick="showDashboard()"><i class="fas fa-tachometer-alt"></i> <span data-translate="dashboard">Dashboard</span></a>
                        <a href="#" onclick="showProfile()"><i class="fas fa-user"></i> <span data-translate="profile">Profile</span></a>
                        <a href="#" onclick="showSettings()"><i class="fas fa-cog"></i> <span data-translate="settings">Settings</span></a>
                        <a href="#" onclick="logout()"><i class="fas fa-sign-out-alt"></i> <span data-translate="logout">Logout</span></a>
                    </div>
                </div>
                <div id="authButtons">
                    <a href="#" class="nav-link" onclick="showAuthModal('login')" data-translate="login">Login</a>
                    <a href="#" class="nav-link" onclick="showAuthModal('signup')" data-translate="signup">Sign Up</a>
                </div>
                <button class="theme-toggle" onclick="toggleTheme()">🌙</button>
            </div>
        </div>
    </nav>

    <!-- Authentication Modal -->
    <div class="modal-overlay" id="authModal">
        <div class="modal">
            <button class="close-modal" onclick="closeAuthModal()">&times;</button>
            <div class="modal-header">
                <h2 id="modalTitle" data-translate="welcomeTitle">Welcome to CVCraft Pro</h2>
                <p id="modalSubtitle" data-translate="welcomeSubtitle">Create professional CVs in minutes</p>
            </div>
            
            <div class="auth-tabs">
                <div class="auth-tab active" onclick="switchAuthTab('login')" data-translate="login">Login</div>
                <div class="auth-tab" onclick="switchAuthTab('signup')" data-translate="signup">Sign Up</div>
            </div>

            <!-- Login Form -->
            <form class="auth-form active" id="loginForm">
                <div class="form-group">
                    <label for="loginEmail" data-translate="emailAddress">Email Address</label>
                    <input type="email" id="loginEmail" placeholder="Enter your email" required>
                </div>
                <div class="form-group">
                    <label for="loginPassword" data-translate="password">Password</label>
                    <input type="password" id="loginPassword" placeholder="Enter your password" required>
                </div>
                <div style="text-align: right; margin-bottom: 20px;">
                    <a href="#" onclick="showForgotPassword()" style="color: #3498db; text-decoration: none; font-size: 0.9rem;" data-translate="forgotPassword">Forgot Password?</a>
                </div>
                <button type="submit" class="download-btn" onclick="handleLogin(event)">
                    <i class="fas fa-sign-in-alt"></i> <span data-translate="loginToAccount">Login to Account</span>
                </button>
                
                <div style="margin: 20px 0; text-align: center; position: relative;">
                    <div style="border-top: 1px solid #ddd; margin: 20px 0;"></div>
                    <span style="background: white; padding: 0 15px; color: #666; position: absolute; top: -10px; left: 50%; transform: translateX(-50%);" data-translate="orContinueWith">or continue with</span>
                </div>
                
                <div style="display: flex; gap: 10px; margin-bottom: 10px;">
                    <button type="button" onclick="loginWithGoogle()" style="flex: 1; padding: 12px; background: #db4437; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600; display: flex; align-items: center; justify-content: center; gap: 8px;">
                        <i class="fab fa-google"></i> <span data-translate="google">Google</span>
                    </button>
                    <button type="button" onclick="loginWithFacebook()" style="flex: 1; padding: 12px; background: #4267B2; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600; display: flex; align-items: center; justify-content: center; gap: 8px;">
                        <i class="fab fa-facebook-f"></i> <span data-translate="facebook">Facebook</span>
                    </button>
                </div>
            </form>

            <!-- Sign Up Form -->
            <form class="auth-form" id="signupForm">
                <div class="form-group">
                    <label for="signupName" data-translate="fullNameAuth">Full Name</label>
                    <input type="text" id="signupName" placeholder="Enter your full name" required>
                </div>
                <div class="form-group">
                    <label for="signupEmail" data-translate="emailAddress">Email Address</label>
                    <input type="email" id="signupEmail" placeholder="Enter your email" required>
                </div>
                <div class="form-group">
                    <label for="signupPassword" data-translate="password">Password</label>
                    <input type="password" id="signupPassword" data-translate-placeholder="createPassword" placeholder="Create a password (min 8 characters)" required minlength="8">
                </div>
                <div class="form-group">
                    <label for="confirmPassword" data-translate="confirmPassword">Confirm Password</label>
                    <input type="password" id="confirmPassword" placeholder="Confirm your password" required>
                </div>
                <div style="margin-bottom: 20px;">
                    <label style="display: flex; align-items: center; gap: 10px; font-size: 0.9rem; cursor: pointer;">
                        <input type="checkbox" id="agreeTerms" required>
                        <span data-translate="agreeTerms">I agree to the Terms of Service and Privacy Policy</span>
                    </label>
                </div>
                <button type="submit" class="download-btn" onclick="handleSignup(event)">
                    <i class="fas fa-user-plus"></i> <span data-translate="createAccount">Create Account</span>
                </button>
                
                <div style="margin: 20px 0; text-align: center; position: relative;">
                    <div style="border-top: 1px solid #ddd; margin: 20px 0;"></div>
                    <span style="background: white; padding: 0 15px; color: #666; position: absolute; top: -10px; left: 50%; transform: translateX(-50%);" data-translate="orSignUpWith">or sign up with</span>
                </div>
                
                <div style="display: flex; gap: 10px; margin-bottom: 10px;">
                    <button type="button" onclick="signupWithGoogle()" style="flex: 1; padding: 12px; background: #db4437; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600; display: flex; align-items: center; justify-content: center; gap: 8px;">
                        <i class="fab fa-google"></i> <span data-translate="google">Google</span>
                    </button>
                    <button type="button" onclick="signupWithFacebook()" style="flex: 1; padding: 12px; background: #4267B2; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600; display: flex; align-items: center; justify-content: center; gap: 8px;">
                        <i class="fab fa-facebook-f"></i> <span data-translate="facebook">Facebook</span>
                    </button>
                </div>
            </form>

            <!-- Forgot Password Form -->
            <form class="auth-form" id="forgotForm">
                <div class="form-group">
                    <label for="forgotEmail" data-translate="emailAddress">Email Address</label>
                    <input type="email" id="forgotEmail" placeholder="Enter your email address" required>
                </div>
                <p style="color: #666; font-size: 0.9rem; margin-bottom: 20px;" data-translate="resetLinkSent">
                    We'll send you a link to reset your password.
                </p>
                <button type="submit" class="download-btn" onclick="handleForgotPassword(event)">
                    <i class="fas fa-paper-plane"></i> <span data-translate="sendResetLink">Send Reset Link</span>
                </button>
                <div style="text-align: center; margin-top: 15px;">
                    <a href="#" onclick="switchAuthTab('login')" style="color: #3498db; text-decoration: none; font-size: 0.9rem;" data-translate="backToLogin">Back to Login</a>
                </div>
            </form>
        </div>
    </div>

    <!-- Features Page -->
    <div class="features-page" id="featuresPage" style="display: none; padding-top: 80px;">
        <div class="features-header" style="background: linear-gradient(135deg, #2c3e50, #3498db); color: white; padding: 60px 20px; text-align: center;">
            <h1 style="font-size: 3rem; margin-bottom: 20px; font-weight: 700;" data-translate="powerfulFeatures">Powerful Features</h1>
            <p style="font-size: 1.3rem; opacity: 0.9; max-width: 600px; margin: 0 auto;" data-translate="featuresSubtitle">Everything you need to create professional CVs that get you hired</p>
        </div>
        
        <div class="features-content" style="max-width: 1200px; margin: 0 auto; padding: 60px 20px;">
            <div class="features-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 40px; margin-bottom: 60px;">
                
                <!-- Professional Templates -->
                <div class="feature-card" style="background: white; border-radius: 15px; padding: 40px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); transition: all 0.3s ease;">
                    <div style="background: linear-gradient(135deg, #3498db, #2980b9); width: 70px; height: 70px; border-radius: 15px; display: flex; align-items: center; justify-content: center; margin-bottom: 25px;">
                        <i class="fas fa-palette" style="font-size: 2rem; color: white;"></i>
                    </div>
                    <h3 style="color: #2c3e50; margin-bottom: 15px; font-size: 1.4rem;" data-translate="professionalTemplates">9 Professional Templates</h3>
                    <p style="color: #666; line-height: 1.6; margin-bottom: 20px;" data-translate="templatesDesc">Choose from 9 expertly designed templates including ATS-optimized formats. Each template is crafted by professional designers to help you stand out and get past applicant tracking systems.</p>
                    <ul style="color: #666; line-height: 1.8; list-style: none; padding: 0;">
                        <li style="margin-bottom: 8px;"><i class="fas fa-check" style="color: #27ae60; margin-right: 10px;"></i><span data-translate="classicTemplate">Classic - Traditional and timeless</span></li>
                        <li style="margin-bottom: 8px;"><i class="fas fa-check" style="color: #27ae60; margin-right: 10px;"></i><span data-translate="modernTemplate">Modern - Two-column layout</span></li>
                        <li style="margin-bottom: 8px;"><i class="fas fa-check" style="color: #27ae60; margin-right: 10px;"></i><span data-translate="creativeTemplate">Creative - Colorful and unique</span></li>
                        <li style="margin-bottom: 8px;"><i class="fas fa-check" style="color: #27ae60; margin-right: 10px;"></i><span data-translate="professionalTemplate">Professional - Corporate style</span></li>
                        <li style="margin-bottom: 8px;"><i class="fas fa-check" style="color: #27ae60; margin-right: 10px;"></i><span data-translate="premiumTemplate">Premium - Sophisticated and elegant</span></li>
                        <li style="margin-bottom: 8px;"><i class="fas fa-check" style="color: #27ae60; margin-right: 10px;"></i><span data-translate="executiveTemplate">Executive - Premium luxury design</span></li>
                        <li style="margin-bottom: 8px;"><i class="fas fa-check" style="color: #27ae60; margin-right: 10px;"></i><span data-translate="traditionalTemplate">Traditional - Classic and formal</span></li>
                        <li style="margin-bottom: 8px;"><i class="fas fa-check" style="color: #27ae60; margin-right: 10px;"></i><span data-translate="linkedinTemplate">LinkedIn - Professional social style</span></li>
                        <li><i class="fas fa-check" style="color: #27ae60; margin-right: 10px;"></i><span data-translate="atsTemplate">ATS Optimized - Beats tracking systems</span></li>
                    </ul>
                </div>

                <!-- Live Preview -->
                <div class="feature-card" style="background: white; border-radius: 15px; padding: 40px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); transition: all 0.3s ease;">
                    <div style="background: linear-gradient(135deg, #27ae60, #2ecc71); width: 70px; height: 70px; border-radius: 15px; display: flex; align-items: center; justify-content: center; margin-bottom: 25px;">
                        <i class="fas fa-eye" style="font-size: 2rem; color: white;"></i>
                    </div>
                    <h3 style="color: #2c3e50; margin-bottom: 15px; font-size: 1.4rem;" data-translate="realTimeLivePreview">Real-Time Live Preview</h3>
                    <p style="color: #666; line-height: 1.6; margin-bottom: 20px;" data-translate="livePreviewDesc">See your CV update instantly as you type. No waiting, no guessing - what you see is exactly what you get in your final PDF.</p>
                    <ul style="color: #666; line-height: 1.8; list-style: none; padding: 0;">
                        <li style="margin-bottom: 8px;"><i class="fas fa-check" style="color: #27ae60; margin-right: 10px;"></i><span data-translate="instantUpdates">Instant updates as you type</span></li>
                        <li style="margin-bottom: 8px;"><i class="fas fa-check" style="color: #27ae60; margin-right: 10px;"></i><span data-translate="switchTemplates">Switch templates in real-time</span></li>
                        <li style="margin-bottom: 8px;"><i class="fas fa-check" style="color: #27ae60; margin-right: 10px;"></i><span data-translate="photoPreview">Photo preview integration</span></li>
                        <li><i class="fas fa-check" style="color: #27ae60; margin-right: 10px;"></i><span data-translate="perfectFormatting">Perfect formatting guaranteed</span></li>
                    </ul>
                </div>

                <!-- User Authentication -->
                <div class="feature-card" style="background: white; border-radius: 15px; padding: 40px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); transition: all 0.3s ease;">
                    <div style="background: linear-gradient(135deg, #e74c3c, #c0392b); width: 70px; height: 70px; border-radius: 15px; display: flex; align-items: center; justify-content: center; margin-bottom: 25px;">
                        <i class="fas fa-shield-alt" style="font-size: 2rem; color: white;"></i>
                    </div>
                    <h3 style="color: #2c3e50; margin-bottom: 15px; font-size: 1.4rem;" data-translate="secureUserAccounts">Secure User Accounts</h3>
                    <p style="color: #666; line-height: 1.6; margin-bottom: 20px;" data-translate="userAccountsDesc">Create your personal account to track your CVs, payment history, and access your documents anytime, anywhere.</p>
                    <ul style="color: #666; line-height: 1.8; list-style: none; padding: 0;">
                        <li style="margin-bottom: 8px;"><i class="fas fa-check" style="color: #27ae60; margin-right: 10px;"></i><span data-translate="secureLogin">Secure login & registration</span></li>
                        <li style="margin-bottom: 8px;"><i class="fas fa-check" style="color: #27ae60; margin-right: 10px;"></i><span data-translate="passwordReset">Password reset functionality</span></li>
                        <li style="margin-bottom: 8px;"><i class="fas fa-check" style="color: #27ae60; margin-right: 10px;"></i><span data-translate="sessionManagement">7-day session management</span></li>
                        <li><i class="fas fa-check" style="color: #27ae60; margin-right: 10px;"></i><span data-translate="personalDashboard">Personal dashboard</span></li>
                    </ul>
                </div>

                <!-- Payment System -->
                <div class="feature-card" style="background: white; border-radius: 15px; padding: 40px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); transition: all 0.3s ease;">
                    <div style="background: linear-gradient(135deg, #f39c12, #e67e22); width: 70px; height: 70px; border-radius: 15px; display: flex; align-items: center; justify-content: center; margin-bottom: 25px;">
                        <i class="fas fa-credit-card" style="font-size: 2rem; color: white;"></i>
                    </div>
                    <h3 style="color: #2c3e50; margin-bottom: 15px; font-size: 1.4rem;" data-translate="securePaymentProcessing">Secure Payment Processing</h3>
                    <p style="color: #666; line-height: 1.6; margin-bottom: 20px;" data-translate="paymentDesc">Simple, transparent pricing at just $1 per CV. Secure payment processing with complete transaction history tracking.</p>
                    <ul style="color: #666; line-height: 1.8; list-style: none; padding: 0;">
                        <li style="margin-bottom: 8px;"><i class="fas fa-check" style="color: #27ae60; margin-right: 10px;"></i><span data-translate="onePrice">$1.00 per CV - No hidden fees</span></li>
                        <li style="margin-bottom: 8px;"><i class="fas fa-check" style="color: #27ae60; margin-right: 10px;"></i><span data-translate="encryptedPayment">Encrypted payment processing</span></li>
                        <li style="margin-bottom: 8px;"><i class="fas fa-check" style="color: #27ae60; margin-right: 10px;"></i><span data-translate="paymentHistory">Complete payment history</span></li>
                        <li><i class="fas fa-check" style="color: #27ae60; margin-right: 10px;"></i><span data-translate="instantReceipt">Instant receipt generation</span></li>
                    </ul>
                </div>

                <!-- PDF Generation -->
                <div class="feature-card" style="background: white; border-radius: 15px; padding: 40px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); transition: all 0.3s ease;">
                    <div style="background: linear-gradient(135deg, #9b59b6, #8e44ad); width: 70px; height: 70px; border-radius: 15px; display: flex; align-items: center; justify-content: center; margin-bottom: 25px;">
                        <i class="fas fa-file-pdf" style="font-size: 2rem; color: white;"></i>
                    </div>
                    <h3 style="color: #2c3e50; margin-bottom: 15px; font-size: 1.4rem;" data-translate="highQualityPDF">High-Quality PDF Export</h3>
                    <p style="color: #666; line-height: 1.6; margin-bottom: 20px;" data-translate="pdfDesc">Generate professional PDF files that maintain perfect formatting, high-resolution images, and are ready for printing or digital sharing.</p>
                    <ul style="color: #666; line-height: 1.8; list-style: none; padding: 0;">
                        <li style="margin-bottom: 8px;"><i class="fas fa-check" style="color: #27ae60; margin-right: 10px;"></i><span data-translate="highResolution">High-resolution PDF output</span></li>
                        <li style="margin-bottom: 8px;"><i class="fas fa-check" style="color: #27ae60; margin-right: 10px;"></i><span data-translate="formatPreservation">Perfect formatting preservation</span></li>
                        <li style="margin-bottom: 8px;"><i class="fas fa-check" style="color: #27ae60; margin-right: 10px;"></i><span data-translate="printReady">Print-ready quality</span></li>
                        <li><i class="fas fa-check" style="color: #27ae60; margin-right: 10px;"></i><span data-translate="instantDownload">Instant download</span></li>
                    </ul>
                </div>

                <!-- Dashboard & History -->
                <div class="feature-card" style="background: white; border-radius: 15px; padding: 40px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); transition: all 0.3s ease;">
                    <div style="background: linear-gradient(135deg, #1abc9c, #16a085); width: 70px; height: 70px; border-radius: 15px; display: flex; align-items: center; justify-content: center; margin-bottom: 25px;">
                        <i class="fas fa-tachometer-alt" style="font-size: 2rem; color: white;"></i>
                    </div>
                    <h3 style="color: #2c3e50; margin-bottom: 15px; font-size: 1.4rem;" data-translate="personalDashboard2">Personal Dashboard</h3>
                    <p style="color: #666; line-height: 1.6; margin-bottom: 20px;" data-translate="dashboardDesc">Access your personal dashboard to manage all your CVs, view payment history, and track your account statistics in one place.</p>
                    <ul style="color: #666; line-height: 1.8; list-style: none; padding: 0;">
                        <li style="margin-bottom: 8px;"><i class="fas fa-check" style="color: #27ae60; margin-right: 10px;"></i><span data-translate="cvManagement">CV history & management</span></li>
                        <li style="margin-bottom: 8px;"><i class="fas fa-check" style="color: #27ae60; margin-right: 10px;"></i><span data-translate="transactionHistory">Payment transaction history</span></li>
                        <li style="margin-bottom: 8px;"><i class="fas fa-check" style="color: #27ae60; margin-right: 10px;"></i><span data-translate="accountStatistics">Account statistics</span></li>
                        <li><i class="fas fa-check" style="color: #27ae60; margin-right: 10px;"></i><span data-translate="quickRedownload">Quick CV re-download</span></li>
                    </ul>
                </div>
            </div>

            <!-- Additional Features Section -->
            <div style="background: #f8f9fa; border-radius: 20px; padding: 50px; margin-bottom: 60px;">
                <h2 style="text-align: center; color: #2c3e50; margin-bottom: 40px; font-size: 2.2rem;" data-translate="additionalFeatures">Additional Features</h2>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 30px;">
                    <div style="text-align: center;">
                        <i class="fas fa-mobile-alt" style="font-size: 3rem; color: #3498db; margin-bottom: 15px;"></i>
                        <h4 style="color: #2c3e50; margin-bottom: 10px;" data-translate="mobileResponsive">Mobile Responsive</h4>
                        <p style="color: #666; font-size: 0.95rem;" data-translate="mobileDesc">Works perfectly on all devices - desktop, tablet, and mobile</p>
                    </div>
                    <div style="text-align: center;">
                        <i class="fas fa-moon" style="font-size: 3rem; color: #3498db; margin-bottom: 15px;"></i>
                        <h4 style="color: #2c3e50; margin-bottom: 10px;" data-translate="darkMode">Dark Mode</h4>
                        <p style="color: #666; font-size: 0.95rem;" data-translate="darkModeDesc">Toggle between light and dark themes for comfortable viewing</p>
                    </div>
                    <div style="text-align: center;">
                        <i class="fas fa-robot" style="font-size: 3rem; color: #3498db; margin-bottom: 15px;"></i>
                        <h4 style="color: #2c3e50; margin-bottom: 10px;" data-translate="aiAssistant">AI Assistant</h4>
                        <p style="color: #666; font-size: 0.95rem;" data-translate="aiDesc">Built-in chatbot to help with CV writing tips and questions</p>
                    </div>
                    <div style="text-align: center;">
                        <i class="fas fa-camera" style="font-size: 3rem; color: #3498db; margin-bottom: 15px;"></i>
                        <h4 style="color: #2c3e50; margin-bottom: 10px;" data-translate="photoUpload">Photo Upload</h4>
                        <p style="color: #666; font-size: 0.95rem;" data-translate="photoDesc">Add professional photos with automatic resizing and positioning</p>
                    </div>
                </div>
            </div>

            <!-- Privacy & Security -->
            <div style="background: linear-gradient(135deg, #2c3e50, #34495e); color: white; border-radius: 20px; padding: 50px; text-align: center;">
                <h2 style="margin-bottom: 30px; font-size: 2.2rem;" data-translate="privacySecurityFirst">Privacy & Security First</h2>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 30px; margin-top: 40px;">
                    <div>
                        <i class="fas fa-lock" style="font-size: 2.5rem; margin-bottom: 15px; color: #3498db;"></i>
                        <h4 style="margin-bottom: 10px;" data-translate="dataEncryption">Data Encryption</h4>
                        <p style="opacity: 0.9; font-size: 0.95rem;" data-translate="encryptionDesc">All data is encrypted using industry-standard protocols</p>
                    </div>
                    <div>
                        <i class="fas fa-trash-alt" style="font-size: 2.5rem; margin-bottom: 15px; color: #3498db;"></i>
                        <h4 style="margin-bottom: 10px;" data-translate="autoDelete">Auto-Delete</h4>
                        <p style="opacity: 0.9; font-size: 0.95rem;" data-translate="autoDeleteDesc">Uploaded photos and data are automatically deleted after PDF generation</p>
                    </div>
                    <div>
                        <i class="fas fa-user-shield" style="font-size: 2.5rem; margin-bottom: 15px; color: #3498db;"></i>
                        <h4 style="margin-bottom: 10px;" data-translate="noDataSharing">No Data Sharing</h4>
                        <p style="opacity: 0.9; font-size: 0.95rem;" data-translate="noSharingDesc">Your personal information is never shared with third parties</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Profile Page -->
    <div class="profile-page" id="profilePage" style="display: none; padding-top: 80px;">
        <div class="profile-header" style="background: linear-gradient(135deg, #2c3e50, #3498db); color: white; padding: 40px 20px; text-align: center;">
            <div style="width: 120px; height: 120px; border-radius: 50%; background: rgba(255,255,255,0.2); margin: 0 auto 20px; display: flex; align-items: center; justify-content: center; font-size: 3rem; font-weight: bold;" id="profileAvatar">JD</div>
            <h1 id="profileUserName">John Doe</h1>
            <p id="profileUserEmail">john.doe@example.com</p>
            <p style="opacity: 0.9; margin-top: 10px;"><span data-translate="memberSince">Member since</span> <span id="profileMemberSince">January 2024</span></p>
        </div>
        
        <div class="profile-content" style="max-width: 800px; margin: 0 auto; padding: 40px 20px;">
            <div style="background: white; border-radius: 15px; padding: 40px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); margin-bottom: 30px;" class="profile-card">
                <h2 style="color: #2c3e50; margin-bottom: 30px; display: flex; align-items: center; gap: 10px;">
                    <i class="fas fa-user"></i> <span data-translate="personalInformation">Personal Information</span>
                </h2>
                
                <form id="profileForm">
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                        <div class="form-group">
                            <label for="profileFirstName" data-translate="firstName">First Name</label>
                            <input type="text" id="profileFirstName" data-translate-placeholder="enterFirstName" placeholder="Enter your first name">
                        </div>
                        <div class="form-group">
                            <label for="profileLastName" data-translate="lastName">Last Name</label>
                            <input type="text" id="profileLastName" data-translate-placeholder="enterLastName" placeholder="Enter your last name">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="profileEmailEdit" data-translate="emailAddress">Email Address</label>
                        <input type="email" id="profileEmailEdit" data-translate-placeholder="enterEmail" placeholder="Enter your email">
                    </div>
                    
                    <div style="display: flex; gap: 15px; margin-top: 30px;">
                        <button type="button" onclick="saveProfile()" class="download-btn" style="flex: 1;">
                            <i class="fas fa-save"></i> <span data-translate="saveChanges">Save Changes</span>
                        </button>
                        <button type="button" onclick="cancelProfileEdit()" style="flex: 1; background: #95a5a6; padding: 15px; color: white; border: none; border-radius: 10px; font-size: 1.1rem; font-weight: 600; cursor: pointer;">
                            <i class="fas fa-times"></i> <span data-translate="cancel">Cancel</span>
                        </button>
                    </div>
                </form>
            </div>
            

            
            <div style="background: white; border-radius: 15px; padding: 40px; box-shadow: 0 10px 30px rgba(0,0,0,0.1);" class="profile-card">
                <h2 style="color: #2c3e50; margin-bottom: 30px; display: flex; align-items: center; gap: 10px;">
                    <i class="fas fa-chart-bar"></i> <span data-translate="accountStats">Account Statistics</span>
                </h2>
                
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 30px;">
                    <div style="text-align: center; padding: 20px; background: #f8f9fa; border-radius: 10px;">
                        <div style="font-size: 2.5rem; font-weight: 700; color: #3498db; margin-bottom: 10px;" id="profileCVCount">0</div>
                        <div style="color: #666; font-weight: 600;">CVs Created</div>
                    </div>
                    <div style="text-align: center; padding: 20px; background: #f8f9fa; border-radius: 10px;">
                        <div style="font-size: 2.5rem; font-weight: 700; color: #27ae60; margin-bottom: 10px;" id="profileTotalSpent">$0.00</div>
                        <div style="color: #666; font-weight: 600;">Total Spent</div>
                    </div>
                    <div style="text-align: center; padding: 20px; background: #f8f9fa; border-radius: 10px;">
                        <div style="font-size: 2.5rem; font-weight: 700; color: #e74c3c; margin-bottom: 10px;" id="profileDaysActive">1</div>
                        <div style="color: #666; font-weight: 600;">Days Active</div>
                    </div>
                    <div style="text-align: center; padding: 20px; background: #f8f9fa; border-radius: 10px;">
                        <div style="font-size: 2.5rem; font-weight: 700; color: #f39c12; margin-bottom: 10px;" id="profileLastLogin">Today</div>
                        <div style="color: #666; font-weight: 600;">Last Login</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Settings Page -->
    <div class="settings-page" id="settingsPage" style="display: none; padding-top: 80px;">
        <div class="settings-header" style="background: linear-gradient(135deg, #2c3e50, #3498db); color: white; padding: 40px 20px; text-align: center;">
            <h1 style="font-size: 2.5rem; margin-bottom: 15px;" data-translate="settings">Settings</h1>
            <p style="font-size: 1.2rem; opacity: 0.9;" data-translate="settingsSubtitle">Customize your CVCraft Pro experience</p>
        </div>
        
        <div class="settings-content" style="max-width: 1000px; margin: 0 auto; padding: 40px 20px;">
            <!-- General Settings -->
            <div style="background: white; border-radius: 15px; padding: 40px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); margin-bottom: 30px;" class="settings-card">
                <h2 style="color: #2c3e50; margin-bottom: 30px; display: flex; align-items: center; gap: 10px;">
                    <i class="fas fa-cog"></i> <span data-translate="generalSettings">General Settings</span>
                </h2>
                
                <div style="display: grid; gap: 25px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; padding: 20px; background: #f8f9fa; border-radius: 10px;">
                        <div>
                            <h4 style="color: #2c3e50; margin-bottom: 5px;" data-translate="darkModeSettings">Dark Mode</h4>
                            <p style="color: #666; font-size: 0.9rem;" data-translate="darkModeSettingsDesc">Switch between light and dark themes</p>
                        </div>
                        <label style="position: relative; display: inline-block; width: 60px; height: 34px;">
                            <input type="checkbox" id="darkModeToggle" onchange="toggleThemeFromSettings()" style="opacity: 0; width: 0; height: 0;">
                            <span style="position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; transition: .4s; border-radius: 34px;"></span>
                            <span style="position: absolute; content: ''; height: 26px; width: 26px; left: 4px; bottom: 4px; background-color: white; transition: .4s; border-radius: 50%;"></span>
                        </label>
                    </div>
                    
                    <div style="display: flex; justify-content: space-between; align-items: center; padding: 20px; background: #f8f9fa; border-radius: 10px;">
                        <div>
                            <h4 style="color: #2c3e50; margin-bottom: 5px;" data-translate="language">Language</h4>
                            <p style="color: #666; font-size: 0.9rem;" data-translate="languageDesc">Choose your preferred language</p>
                        </div>
                        <select id="languageSelect" onchange="changeLanguage()" style="padding: 8px 12px; border: 2px solid #e9ecef; border-radius: 8px; background: white; color: #2c3e50; font-size: 1rem; cursor: pointer; min-width: 120px;">
                            <option value="en">🇺🇸 English</option>
                            <option value="es">🇪🇸 Español</option>
                        </select>
                    </div>
                </div>
            </div>
            
            <!-- Change Password -->
            <div style="background: white; border-radius: 15px; padding: 40px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); margin-bottom: 30px;" class="settings-card">
                <h2 style="color: #2c3e50; margin-bottom: 30px; display: flex; align-items: center; gap: 10px;">
                    <i class="fas fa-lock"></i> <span data-translate="changePassword">Change Password</span>
                </h2>
                
                <form id="settingsPasswordForm">
                    <div class="form-group">
                        <label for="settingsCurrentPassword" data-translate="currentPassword">Current Password</label>
                        <input type="password" id="settingsCurrentPassword" data-translate-placeholder="enterCurrentPassword" placeholder="Enter your current password">
                    </div>
                    
                    <div class="form-group">
                        <label for="settingsNewPassword" data-translate="newPassword">New Password</label>
                        <input type="password" id="settingsNewPassword" data-translate-placeholder="enterNewPassword" placeholder="Enter new password (min 8 characters)" minlength="8">
                    </div>
                    
                    <div class="form-group">
                        <label for="settingsConfirmNewPassword" data-translate="confirmNewPassword">Confirm New Password</label>
                        <input type="password" id="settingsConfirmNewPassword" data-translate-placeholder="confirmNewPasswordPlaceholder" placeholder="Confirm your new password">
                    </div>
                    
                    <button type="button" onclick="changePasswordFromSettings()" class="download-btn" style="margin-top: 20px;">
                        <i class="fas fa-key"></i> <span data-translate="updatePassword">Update Password</span>
                    </button>
                </form>
            </div>
            
            <!-- Account Management -->
            <div style="background: white; border-radius: 15px; padding: 40px; box-shadow: 0 10px 30px rgba(0,0,0,0.1);" class="settings-card">
                <h2 style="color: #2c3e50; margin-bottom: 30px; display: flex; align-items: center; gap: 10px;">
                    <i class="fas fa-user-cog"></i> <span data-translate="accountManagement">Account Management</span>
                </h2>
                
                <div style="display: grid; gap: 25px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; padding: 20px; background: #fff3cd; border: 1px solid #ffeaa7; border-radius: 10px;">
                        <div>
                            <h4 style="color: #856404; margin-bottom: 5px;" data-translate="clearAllData">Clear All Data</h4>
                            <p style="color: #856404; font-size: 0.9rem;" data-translate="clearDataDesc">Remove all your CVs and personal information</p>
                        </div>
                        <button onclick="clearAllData()" style="padding: 10px 20px; background: #f39c12; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600;" data-translate="clearData">
                            Clear Data
                        </button>
                    </div>
                    
                    <div style="display: flex; justify-content: space-between; align-items: center; padding: 20px; background: #f8d7da; border: 1px solid #f5c6cb; border-radius: 10px;">
                        <div>
                            <h4 style="color: #721c24; margin-bottom: 5px;" data-translate="deleteAccount">Delete Account</h4>
                            <p style="color: #721c24; font-size: 0.9rem;" data-translate="deleteAccountDesc">Permanently delete your account and all data</p>
                        </div>
                        <button onclick="deleteAccount()" style="padding: 10px 20px; background: #e74c3c; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600;" data-translate="deleteAccount">
                            Delete Account
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Save Settings Button -->
            <div style="text-align: center; margin-top: 40px;">
                <button onclick="saveSettings()" class="download-btn" style="padding: 15px 40px; font-size: 1.2rem;">
                    <i class="fas fa-save"></i> <span data-translate="saveAllSettings">Save All Settings</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Dashboard -->
    <div class="dashboard" id="dashboard">
        <div class="dashboard-header">
            <h1><span data-translate="welcomeBack">Welcome back</span>, <span id="dashboardUserName">John</span>!</h1>
            <p data-translate="dashboardSubtitle">Manage your CVs, view payment history, and create new resumes</p>
        </div>
        <div class="dashboard-content">
            <div class="dashboard-grid">
                <div class="dashboard-card">
                    <h3><i class="fas fa-file-alt"></i> <span data-translate="myCVs">My CVs</span></h3>
                    <div style="display: flex; gap: 10px; margin-bottom: 20px;">
                        <button onclick="showCVBuilder()" style="flex: 1; padding: 12px; background: linear-gradient(135deg, #27ae60, #2ecc71); color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600;">
                            <i class="fas fa-plus"></i> <span data-translate="createNewCV">Create New CV</span>
                        </button>
                        <button onclick="toggleHistory()" id="historyToggleBtn" style="padding: 8px 16px; background: none; color: #3498db; border: 2px solid #3498db; border-radius: 8px; cursor: pointer; font-weight: 600; font-size: 0.9rem;">
                            <i class="fas fa-eye"></i> <span data-translate="showHistory">Show History</span>
                        </button>
                        <button onclick="clearHistory()" title="Clear all history" style="padding: 8px 12px; background: none; color: #e74c3c; border: none; border-radius: 8px; cursor: pointer; font-size: 0.8rem; transition: all 0.3s ease;">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                    <div id="combinedHistory" style="display: none;">
                        <p style="text-align: center; color: #666; padding: 15px; font-size: 0.9rem;" data-translate="noActivity">No activity yet. Create your first CV to see history here!</p>
                    </div>
                </div>



                <div class="dashboard-card">
                    <h3><i class="fas fa-chart-line"></i> <span data-translate="accountStats">Account Stats</span></h3>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; text-align: center;">
                        <div>
                            <div style="font-size: 2rem; font-weight: 700; color: #3498db;" id="userCVCount">0</div>
                            <div style="font-size: 0.9rem; color: #666;" data-translate="cvsCreated">CVs Created</div>
                        </div>
                        <div>
                            <div style="font-size: 2rem; font-weight: 700; color: #27ae60;" id="userTotalSpent">$0.00</div>
                            <div style="font-size: 0.9rem; color: #666;" data-translate="totalSpent">Total Spent</div>
                        </div>
                        <div>
                            <div style="font-size: 2rem; font-weight: 700; color: #e74c3c;" id="userDaysActive">1</div>
                            <div style="font-size: 0.9rem; color: #666;" data-translate="daysActive">Days Active</div>
                        </div>
                        <div>
                            <div style="font-size: 2rem; font-weight: 700; color: #f39c12;">9</div>
                            <div style="font-size: 0.9rem; color: #666;" data-translate="templates">Templates</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- CV Builder Container -->
    <div class="container" id="cvBuilder">
        <div class="header">
            <div class="header-content">
                <h1 data-translate="mainTitle">CVCraft Pro</h1>
                <p data-translate="mainSubtitle">Create stunning, professional CVs in minutes with our advanced builder</p>

            </div>
        </div>
        
        <div class="main-content">
            <div class="form-section">
                <div class="template-selector">
                    <label>Choose Template:</label>
                    <div class="template-buttons">
                        <button class="template-btn active" data-template="classic">Classic</button>
                        <button class="template-btn" data-template="modern">Modern</button>
                        <button class="template-btn" data-template="creative">Creative</button>
                        <button class="template-btn" data-template="professional">Professional</button>
                        <button class="template-btn" data-template="premium">Premium</button>
                        <button class="template-btn" data-template="executive">Executive</button>
                        <button class="template-btn" data-template="traditional">Traditional</button>
                        <button class="template-btn" data-template="ats">ATS Optimized</button>
                        <button class="template-btn" data-template="linkedin">LinkedIn</button>
                    </div>
                </div>

                <form id="cvForm">
                    <div class="form-group">
                        <label for="fullName" data-translate="fullName">Full Name</label>
                        <input type="text" id="fullName" data-translate-placeholder="fullNamePlaceholder" placeholder="Enter your full name">
                    </div>

                    <div class="form-group">
                        <label for="contact" data-translate="contactInfo">Contact Information</label>
                        <textarea id="contact" data-translate-placeholder="contactPlaceholder" placeholder="Email: your.email@example.com&#10;Phone: +1 (555) 123-4567&#10;LinkedIn: linkedin.com/in/yourname&#10;Website: yourwebsite.com" style="min-height: 80px;"></textarea>
                    </div>

                    <div class="form-group">
                        <label for="headline" data-translate="professionalHeadline">Professional Headline</label>
                        <input type="text" id="headline" data-translate-placeholder="headlinePlaceholder" placeholder="Senior Software Developer | Full-Stack Engineer | Tech Enthusiast">
                    </div>

                    <div class="form-group">
                        <label for="photo" data-translate="profilePhoto">Profile Photo</label>
                        <input type="file" id="photo" accept="image/*" style="padding: 8px;">
                        <div id="photoPreview" style="margin-top: 10px; text-align: center;"></div>
                    </div>

                    <div class="form-group">
                        <label for="education" data-translate="education">Education</label>
                        <textarea id="education" data-translate-placeholder="educationPlaceholder" placeholder="Bachelor of Science in Computer Science&#10;University of Technology, 2020-2024"></textarea>
                    </div>

                    <div class="form-group">
                        <label for="skills" data-translate="skills">Skills</label>
                        <textarea id="skills" data-translate-placeholder="skillsPlaceholder" placeholder="JavaScript, Python, React, Node.js&#10;Project Management, Team Leadership"></textarea>
                    </div>

                    <div class="form-group">
                        <label for="experience" data-translate="workExperience">Work Experience</label>
                        <textarea id="experience" data-translate-placeholder="experiencePlaceholder" placeholder="Software Developer | Tech Company (2022-Present)&#10;• Developed web applications using React and Node.js&#10;• Collaborated with cross-functional teams"></textarea>
                    </div>

                    <div class="form-group">
                        <label for="languages" data-translate="languagesOptional">Languages (Optional)</label>
                        <textarea id="languages" data-translate-placeholder="languagesPlaceholder" placeholder="English - Native&#10;Spanish - Fluent&#10;French - Intermediate"></textarea>
                    </div>

                    <div class="form-group">
                        <label for="certificates" data-translate="certificatesAwards">Certificates & Awards (Optional)</label>
                        <textarea id="certificates" data-translate-placeholder="certificatesPlaceholder" placeholder="AWS Certified Solutions Architect (2023)&#10;Google Analytics Certified (2022)&#10;Best Employee Award - Tech Corp (2021)"></textarea>
                    </div>

                    <div class="form-group">
                        <label for="hobbies" data-translate="hobbiesInterests">Hobbies & Interests (Optional)</label>
                        <textarea id="hobbies" data-translate-placeholder="hobbiesPlaceholder" placeholder="Photography, Hiking, Reading&#10;Volunteer work at local animal shelter&#10;Playing guitar and composing music"></textarea>
                    </div>

                    <div class="payment-section">
                        <div class="price-info">
                            <h4 style="color: #2c3e50; margin-bottom: 10px;">💳 Generate Professional CV - $1.00</h4>
                            <p style="color: #666; font-size: 0.9rem; margin-bottom: 15px;">One-time payment • Instant download • Professional quality</p>
                        </div>
                        
                        <button type="button" class="download-btn" onclick="processPayPalPayment()" id="payBtn">
                            💳 Pay $1.00 & Download CV
                        </button>
                        
                        <div id="paymentSuccess" style="display: none; text-align: center; margin-top: 15px;">
                            <p style="color: #27ae60; font-weight: 600; margin-bottom: 10px;">✅ Payment Successful!</p>
                            <button type="button" class="download-btn" onclick="downloadPDF()" style="background: #27ae60;">
                                📄 Download Your CV Now
                            </button>
                        </div>
                    </div>
                </form>
            </div>

            <div class="preview-section">
                <h3 style="margin-bottom: 20px; color: #2c3e50;">Live Preview</h3>
                
                <!-- Content Overflow Warning -->
                <div id="overflowWarning" style="display: none; background: linear-gradient(135deg, #e74c3c, #c0392b); color: white; padding: 15px; border-radius: 10px; margin-bottom: 15px; box-shadow: 0 4px 15px rgba(231, 76, 60, 0.3);">
                    <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                        <i class="fas fa-exclamation-triangle" style="font-size: 1.2rem;"></i>
                        <strong>Content Overflow Warning!</strong>
                    </div>
                    <div id="overflowMessage" style="font-size: 0.95rem; line-height: 1.4;"></div>
                    <div style="margin-top: 10px; font-size: 0.9rem; opacity: 0.9;">
                        💡 <strong>Tip:</strong> Consider shortening your content or switching to a template with more space.
                    </div>
                </div>
                
                <div class="cv-preview" id="cvPreview">
                    <div class="template-classic" id="cvContent">
                        <div class="cv-header">
                            <img id="previewPhoto" class="cv-photo" style="display: none;">
                            <div class="cv-name" id="previewName">Your Name</div>
                            <div style="font-style: italic; margin-bottom: 10px; color: #666;" id="previewHeadline">Professional Headline</div>
                            <div class="cv-contact" id="previewContact">
                                Email: your.email@example.com<br>Phone: +1 (555) 123-4567<br>LinkedIn: linkedin.com/in/yourname
                            </div>
                        </div>

                        <div class="cv-section">
                            <div class="cv-section-title">Education</div>
                            <div id="previewEducation">Your education details will appear here</div>
                        </div>

                        <div class="cv-section">
                            <div class="cv-section-title">Skills</div>
                            <div id="previewSkills">Your skills will appear here</div>
                        </div>

                        <div class="cv-section">
                            <div class="cv-section-title">Experience</div>
                            <div id="previewExperience">Your work experience will appear here</div>
                        </div>

                        <div class="cv-section" id="languagesSection" style="display: none;">
                            <div class="cv-section-title">Languages</div>
                            <div id="previewLanguages"></div>
                        </div>

                        <div class="cv-section" id="certificatesSection" style="display: none;">
                            <div class="cv-section-title">Certificates & Awards</div>
                            <div id="previewCertificates"></div>
                        </div>

                        <div class="cv-section" id="hobbiesSection" style="display: none;">
                            <div class="cv-section-title">Hobbies & Interests</div>
                            <div id="previewHobbies"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div style="background: #2c3e50; color: white; padding: 30px; text-align: center; margin-top: 40px;">
            <h3 style="margin-bottom: 20px; color: #ecf0f1;" data-translate="importantInformation">Important Information</h3>
            
            <div style="max-width: 800px; margin: 0 auto; text-align: left; line-height: 1.6;">
                <h4 style="color: #3498db; margin-bottom: 10px;" data-translate="privacyDataProtection">🔒 Privacy & Data Protection</h4>
                <p style="margin-bottom: 15px; font-size: 0.95rem;" data-translate="privacyText">
                    • Your personal information is processed securely and never shared with third parties<br>
                    • All uploaded photos and data are automatically deleted after PDF generation<br>
                    • We use industry-standard encryption for all payment transactions
                </p>
                
                <h4 style="color: #3498db; margin-bottom: 10px;" data-translate="paymentPolicy">💳 Payment Policy</h4>
                <p style="margin-bottom: 15px; font-size: 0.95rem;" data-translate="paymentPolicyText">
                    • One-time payment of $1.00 allows generation of ONE CV only<br>
                    • Please ensure all information is correct before payment<br>
                    • No refunds after successful PDF generation<br>
                    • Payment is processed securely through encrypted channels
                </p>
                
                <h4 style="color: #3498db; margin-bottom: 10px;" data-translate="importantNotice">⚠️ Important Notice</h4>
                <p style="margin-bottom: 20px; font-size: 0.95rem;" data-translate="noticeText">
                    Please double-check all your information before making payment. Each $1.00 payment allows you to generate only ONE CV. 
                    Make sure your details are complete and accurate as you cannot generate another CV with the same payment.
                </p>
                
                <div style="text-align: center; padding: 20px; background: rgba(52, 152, 219, 0.1); border-radius: 10px;">
                    <h4 style="color: #3498db; margin-bottom: 10px;" data-translate="needHelp">📧 Need Help?</h4>
                    <p style="margin-bottom: 10px;" data-translate="helpText">For any issues, questions, or technical support:</p>
                    <a href="mailto:tonyazer86@gmail.com" style="color: #3498db; font-weight: 600; text-decoration: none; font-size: 1.1rem;">
                        tonyazer86@gmail.com
                    </a>
                    <p style="margin-top: 10px; font-size: 0.9rem; opacity: 0.8;" data-translate="responseTime">
                        We typically respond within 24 hours
                    </p>
                </div>
            </div>
        </div>
    </div>

    <div class="chatbot-container">
        <button class="chatbot-toggle" onclick="toggleChatbot()">💬</button>
        <div class="chatbot-window" id="chatbotWindow">
            <div class="chatbot-header">
                CV Assistant
            </div>
            <div class="chatbot-messages" id="chatbotMessages">
                <div class="chatbot-message bot">
                    Hi! I'm here to help you with your CV. Ask me anything about resume writing, templates, or general questions!
                </div>
            </div>
            <div class="chatbot-input-container">
                <input type="text" class="chatbot-input" id="chatbotInput" placeholder="Type your message..." onkeypress="handleChatbotEnter(event)">
                <button class="chatbot-send" onclick="sendChatbotMessage()">➤</button>
            </div>
        </div>
    </div>

    <script>
        let currentTemplate = 'classic';

        // Form inputs
        const inputs = {
            fullName: document.getElementById('fullName'),
            contact: document.getElementById('contact'),
            headline: document.getElementById('headline'),
            education: document.getElementById('education'),
            skills: document.getElementById('skills'),
            experience: document.getElementById('experience'),
            languages: document.getElementById('languages'),
            certificates: document.getElementById('certificates'),
            hobbies: document.getElementById('hobbies'),
            photo: document.getElementById('photo')
        };

        // Preview elements
        const preview = {
            name: document.getElementById('previewName'),
            contact: document.getElementById('previewContact'),
            headline: document.getElementById('previewHeadline'),
            education: document.getElementById('previewEducation'),
            skills: document.getElementById('previewSkills'),
            experience: document.getElementById('previewExperience'),
            languages: document.getElementById('previewLanguages'),
            certificates: document.getElementById('previewCertificates'),
            hobbies: document.getElementById('previewHobbies')
        };

        // Template buttons
        const templateButtons = document.querySelectorAll('.template-btn');
        const cvContent = document.getElementById('cvContent');

        // Add event listeners to form inputs
        Object.keys(inputs).forEach(key => {
            if (key === 'photo') {
                inputs[key].addEventListener('change', handlePhotoUpload);
            } else {
                inputs[key].addEventListener('input', () => {
                    updatePreview();
                    checkContentOverflow();
                    resetPaymentIfContentChanged();
                });
            }
        });

        // Add event listeners to template buttons
        templateButtons.forEach(btn => {
            btn.addEventListener('click', () => {
                templateButtons.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                currentTemplate = btn.dataset.template;
                updateTemplate();
                updatePreview();
                checkContentOverflow();
                resetPaymentIfContentChanged();
            });
        });

        let photoDataUrl = '';
        let paymentCompleted = false;
        let lastPaidContent = '';

        // Content tracking system for payment reset
        function generateContentHash() {
            const content = {
                name: inputs.fullName.value || '',
                contact: inputs.contact.value || '',
                headline: inputs.headline.value || '',
                education: inputs.education.value || '',
                skills: inputs.skills.value || '',
                experience: inputs.experience.value || '',
                languages: inputs.languages.value || '',
                certificates: inputs.certificates.value || '',
                hobbies: inputs.hobbies.value || '',
                template: currentTemplate,
                photo: photoDataUrl
            };
            return JSON.stringify(content);
        }

        function checkContentChanged() {
            if (!paymentCompleted || !lastPaidContent) return false;
            const currentContent = generateContentHash();
            return currentContent !== lastPaidContent;
        }

        function resetPaymentIfContentChanged() {
            if (checkContentChanged()) {
                paymentCompleted = false;
                lastPaidContent = '';
                
                // Show payment form again
                document.getElementById('paymentForm').style.display = 'block';
                document.getElementById('payBtn').style.display = 'block';
                document.getElementById('paymentSuccess').style.display = 'none';
                
                // Update button text
                document.getElementById('payBtn').textContent = '💳 Pay $1.00 & Download CV';
                document.getElementById('payBtn').disabled = false;
                
                showNotification('Content changed! Please make a new payment to download the updated CV.', 'info');
            }
        }

        function processPayPalPayment() {
            if (!currentUser) {
                showNotification('Please login to make a payment.', 'error');
                showAuthModal('login');
                return;
            }
            
            // Store CV data before redirecting to PayPal
            const cvData = {
                fullName: inputs.fullName.value,
                contact: inputs.contact.value,
                headline: inputs.headline.value,
                education: inputs.education.value,
                skills: inputs.skills.value,
                experience: inputs.experience.value,
                languages: inputs.languages.value,
                certificates: inputs.certificates.value,
                hobbies: inputs.hobbies.value,
                template: currentTemplate,
                photo: photoDataUrl,
                timestamp: Date.now()
            };
            
            // Save CV data to localStorage for retrieval after payment
            localStorage.setItem('cvcraft_pending_cv', JSON.stringify(cvData));
            
            // Redirect to PayPal payment link
            window.open('https://www.paypal.com/ncp/payment/MBNT9PF7SW9CN', '_blank');
            
            // Show payment processing message
            showNotification('Redirecting to PayPal for secure payment...', 'info');
            
            // Start checking for payment completion
            startPaymentStatusCheck();
        }
        
        function startPaymentStatusCheck() {
            // Show a modal or message asking user to confirm payment completion
            setTimeout(() => {
                const paymentCompleted = confirm('Have you completed the PayPal payment? Click OK if payment was successful, or Cancel to try again.');
                
                if (paymentCompleted) {
                    handlePaymentSuccess();
                } else {
                    showNotification('Payment not completed. Please try again when ready.', 'info');
                }
            }, 3000); // Wait 3 seconds before asking
        }
        
        function handlePaymentSuccess() {
            // Retrieve CV data
            const cvData = JSON.parse(localStorage.getItem('cvcraft_pending_cv') || '{}');
            
            if (!cvData.fullName) {
                showNotification('CV data not found. Please recreate your CV.', 'error');
                return;
            }
            
            // Restore CV data to form
            inputs.fullName.value = cvData.fullName || '';
            inputs.contact.value = cvData.contact || '';
            inputs.headline.value = cvData.headline || '';
            inputs.education.value = cvData.education || '';
            inputs.skills.value = cvData.skills || '';
            inputs.experience.value = cvData.experience || '';
            inputs.languages.value = cvData.languages || '';
            inputs.certificates.value = cvData.certificates || '';
            inputs.hobbies.value = cvData.hobbies || '';
            
            if (cvData.photo) {
                photoDataUrl = cvData.photo;
                const photoPreview = document.getElementById('photoPreview');
                photoPreview.innerHTML = `<img src="${photoDataUrl}" style="width: 80px; height: 80px; border-radius: 50%; object-fit: cover; border: 2px solid #3498db;">`;
            }
            
            if (cvData.template) {
                currentTemplate = cvData.template;
                // Update template buttons
                document.querySelectorAll('.template-btn').forEach(btn => {
                    btn.classList.remove('active');
                    if (btn.dataset.template === currentTemplate) {
                        btn.classList.add('active');
                    }
                });
                updateTemplate();
            }
            
            // Update preview
            updatePreview();
            
            // Mark payment as completed
            paymentCompleted = true;
            lastPaidContent = generateContentHash();
            
            // Add payment to user history
            if (currentUser) {
                const user = userDatabase[currentUser.email];
                if (!user.paymentHistory) user.paymentHistory = [];
                user.paymentHistory.push({
                    id: 'payment_' + Date.now(),
                    amount: '1.00',
                    date: Date.now(),
                    status: 'completed',
                    method: 'PayPal'
                });
                
                localStorage.setItem('cvcraft_users', JSON.stringify(userDatabase));
            }
            
            // Show success UI
            document.getElementById('payBtn').style.display = 'none';
            document.getElementById('paymentSuccess').style.display = 'block';
            
            // Clean up stored CV data
            localStorage.removeItem('cvcraft_pending_cv');
            
            showNotification('Payment successful! You can now download your CV.', 'success');
        }

        function handlePhotoUpload(event) {
            const file = event.target.files[0];
            if (file) {
                // Validate file type
                if (!file.type.startsWith('image/')) {
                    alert('Please select a valid image file (JPG, PNG, GIF, etc.)');
                    return;
                }
                
                // Validate file size (max 5MB)
                if (file.size > 5 * 1024 * 1024) {
                    alert('Image file is too large. Please select an image smaller than 5MB.');
                    return;
                }
                
                const reader = new FileReader();
                reader.onload = function(e) {
                    photoDataUrl = e.target.result;
                    
                    // Show preview in form
                    const photoPreview = document.getElementById('photoPreview');
                    photoPreview.innerHTML = `<img src="${photoDataUrl}" style="width: 80px; height: 80px; border-radius: 50%; object-fit: cover; border: 2px solid #3498db;">`;
                    
                    // Immediately update the CV preview
                    updatePreview();
                    
                    // Check if payment needs to be reset due to photo change
                    resetPaymentIfContentChanged();
                    
                    // Ensure the photo loads in the preview
                    const previewPhoto = document.getElementById('previewPhoto');
                    if (previewPhoto) {
                        previewPhoto.onload = function() {
                            console.log('Photo loaded successfully in preview');
                        };
                        previewPhoto.onerror = function() {
                            console.error('Failed to load photo in preview');
                        };
                    }
                };
                reader.onerror = function() {
                    alert('Error reading the image file. Please try again.');
                };
                reader.readAsDataURL(file);
            }
        }

        function updatePreview() {
            const name = inputs.fullName.value || 'Your Name';
            const contact = inputs.contact.value || 'Email: your.email@example.com\nPhone: +1 (555) 123-4567\nLinkedIn: linkedin.com/in/yourname';
            const headline = inputs.headline.value || 'Professional Headline';
            const education = inputs.education.value || 'Your education details will appear here';
            const skills = inputs.skills.value || 'Your skills will appear here';
            const experience = inputs.experience.value || 'Your work experience will appear here';
            const languages = inputs.languages.value;
            const certificates = inputs.certificates.value;
            const hobbies = inputs.hobbies.value;

            // Update main content
            if (preview.name) preview.name.textContent = name;
            if (preview.contact) preview.contact.innerHTML = contact.replace(/\n/g, '<br>');
            if (preview.headline) preview.headline.textContent = headline;
            if (preview.education) preview.education.innerHTML = education.replace(/\n/g, '<br>');
            if (preview.skills) preview.skills.innerHTML = skills.replace(/\n/g, '<br>');
            if (preview.experience) preview.experience.innerHTML = experience.replace(/\n/g, '<br>');

            // Handle optional sections - show only if filled
            const languagesSection = document.getElementById('languagesSection');
            const certificatesSection = document.getElementById('certificatesSection');
            const hobbiesSection = document.getElementById('hobbiesSection');

            if (languages && languages.trim()) {
                if (preview.languages) preview.languages.innerHTML = languages.replace(/\n/g, '<br>');
                if (languagesSection) languagesSection.style.display = 'block';
            } else {
                if (languagesSection) languagesSection.style.display = 'none';
            }

            if (certificates && certificates.trim()) {
                if (preview.certificates) preview.certificates.innerHTML = certificates.replace(/\n/g, '<br>');
                if (certificatesSection) certificatesSection.style.display = 'block';
            } else {
                if (certificatesSection) certificatesSection.style.display = 'none';
            }

            if (hobbies && hobbies.trim()) {
                if (preview.hobbies) preview.hobbies.innerHTML = hobbies.replace(/\n/g, '<br>');
                if (hobbiesSection) hobbiesSection.style.display = 'block';
            } else {
                if (hobbiesSection) hobbiesSection.style.display = 'none';
            }

            // Update photo - ensure it displays properly
            const photoElement = document.getElementById('previewPhoto');
            if (photoElement && photoDataUrl) {
                photoElement.src = photoDataUrl;
                photoElement.style.display = 'block';
                photoElement.onload = function() {
                    console.log('Photo loaded in preview');
                };
            } else if (photoElement) {
                photoElement.style.display = 'none';
            }
        }

        // Alias function for PDF generation compatibility
        function updateCV() {
            updatePreview();
        }

        // Content overflow detection system
        function checkContentOverflow() {
            const cvContent = document.getElementById('cvContent');
            const warningDiv = document.getElementById('overflowWarning');
            const messageDiv = document.getElementById('overflowMessage');
            
            if (!cvContent || !warningDiv || !messageDiv) return;
            
            // Get template-specific limits and check content
            const templateLimits = getTemplateLimits(currentTemplate);
            const contentAnalysis = analyzeContent();
            
            let warnings = [];
            let hasOverflow = false;
            
            // Check each content type against template limits
            if (contentAnalysis.education.lines > templateLimits.education) {
                warnings.push(`📚 <strong>Education section:</strong> ${contentAnalysis.education.lines} lines (recommended: ${templateLimits.education} lines max)`);
                hasOverflow = true;
            }
            
            if (contentAnalysis.experience.lines > templateLimits.experience) {
                warnings.push(`💼 <strong>Work Experience:</strong> ${contentAnalysis.experience.lines} lines (recommended: ${templateLimits.experience} lines max)`);
                hasOverflow = true;
            }
            
            if (contentAnalysis.skills.lines > templateLimits.skills) {
                warnings.push(`🛠️ <strong>Skills section:</strong> ${contentAnalysis.skills.lines} lines (recommended: ${templateLimits.skills} lines max)`);
                hasOverflow = true;
            }
            
            if (contentAnalysis.languages.lines > templateLimits.languages && contentAnalysis.languages.lines > 0) {
                warnings.push(`🌍 <strong>Languages section:</strong> ${contentAnalysis.languages.lines} lines (recommended: ${templateLimits.languages} lines max)`);
                hasOverflow = true;
            }
            
            if (contentAnalysis.certificates.lines > templateLimits.certificates && contentAnalysis.certificates.lines > 0) {
                warnings.push(`🏆 <strong>Certificates section:</strong> ${contentAnalysis.certificates.lines} lines (recommended: ${templateLimits.certificates} lines max)`);
                hasOverflow = true;
            }
            
            if (contentAnalysis.hobbies.lines > templateLimits.hobbies && contentAnalysis.hobbies.lines > 0) {
                warnings.push(`🎯 <strong>Hobbies section:</strong> ${contentAnalysis.hobbies.lines} lines (recommended: ${templateLimits.hobbies} lines max)`);
                hasOverflow = true;
            }
            
            // Show or hide warning
            if (hasOverflow) {
                messageDiv.innerHTML = `
                    <div style="margin-bottom: 10px;">Your content may not fit properly in the <strong>${currentTemplate.charAt(0).toUpperCase() + currentTemplate.slice(1)}</strong> template:</div>
                    ${warnings.join('<br>')}
                    <div style="margin-top: 12px; padding: 10px; background: rgba(255,255,255,0.1); border-radius: 5px; font-size: 0.9rem;">
                        <strong>Template Info:</strong> ${templateLimits.description}
                    </div>
                `;
                warningDiv.style.display = 'block';
            } else {
                warningDiv.style.display = 'none';
            }
        }
        
        function getTemplateLimits(template) {
            const limits = {
                classic: {
                    education: 4,
                    experience: 8,
                    skills: 6,
                    languages: 3,
                    certificates: 4,
                    hobbies: 3,
                    description: "Traditional single-column layout with moderate space for each section."
                },
                modern: {
                    education: 5,
                    experience: 10,
                    skills: 8,
                    languages: 4,
                    certificates: 5,
                    hobbies: 4,
                    description: "Two-column layout with sidebar for skills and languages, main area for experience."
                },
                creative: {
                    education: 4,
                    experience: 7,
                    skills: 5,
                    languages: 3,
                    certificates: 4,
                    hobbies: 3,
                    description: "Colorful gradient design with sections in boxes - limited space per section."
                },
                professional: {
                    education: 3,
                    experience: 6,
                    skills: 4,
                    languages: 2,
                    certificates: 3,
                    hobbies: 2,
                    description: "Corporate design with photo header - compact sections due to header space."
                },
                premium: {
                    education: 3,
                    experience: 6,
                    skills: 4,
                    languages: 2,
                    certificates: 3,
                    hobbies: 2,
                    description: "Elegant design with large header and decorative elements - limited content space."
                },
                executive: {
                    education: 3,
                    experience: 5,
                    skills: 4,
                    languages: 2,
                    certificates: 3,
                    hobbies: 2,
                    description: "Luxury design with prominent header - very limited space for content sections."
                },
                traditional: {
                    education: 4,
                    experience: 8,
                    skills: 6,
                    languages: 3,
                    certificates: 4,
                    hobbies: 3,
                    description: "Classic formal layout with good balance of space for all sections."
                },
                ats: {
                    education: 6,
                    experience: 12,
                    skills: 8,
                    languages: 4,
                    certificates: 6,
                    hobbies: 4,
                    description: "Plain text optimized for ATS systems - most space available for content."
                },
                linkedin: {
                    education: 4,
                    experience: 8,
                    skills: 6,
                    languages: 3,
                    certificates: 5,
                    hobbies: 3,
                    description: "LinkedIn-style with blue header and professional sections layout."
                }
            };
            
            return limits[template] || limits.classic;
        }
        
        function analyzeContent() {
            const analysis = {
                education: { lines: countLines(inputs.education.value) },
                experience: { lines: countLines(inputs.experience.value) },
                skills: { lines: countLines(inputs.skills.value) },
                languages: { lines: countLines(inputs.languages.value) },
                certificates: { lines: countLines(inputs.certificates.value) },
                hobbies: { lines: countLines(inputs.hobbies.value) }
            };
            
            return analysis;
        }
        
        function countLines(text) {
            if (!text || !text.trim()) return 0;
            return text.trim().split('\n').length;
        }

        function updateTemplate() {
            cvContent.className = `template-${currentTemplate}`;
            
            // Standard template structure with ALL fields for ALL templates
            const standardFields = `
                <div class="cv-section" id="languagesSection" style="display: none;">
                    <div class="cv-section-title">Languages</div>
                    <div class="cv-section-content" id="previewLanguages"></div>
                </div>

                <div class="cv-section" id="certificatesSection" style="display: none;">
                    <div class="cv-section-title">Certificates & Awards</div>
                    <div class="cv-section-content" id="previewCertificates"></div>
                </div>

                <div class="cv-section" id="hobbiesSection" style="display: none;">
                    <div class="cv-section-title">Hobbies & Interests</div>
                    <div class="cv-section-content" id="previewHobbies"></div>
                </div>
            `;
            
            if (currentTemplate === 'executive') {
                cvContent.innerHTML = `
                    <div class="cv-header">
                        <img id="previewPhoto" class="cv-photo" style="display: none;">
                        <div class="cv-name" id="previewName">Your Name</div>
                        <div style="font-style: italic; margin-bottom: 10px; color: rgba(255,255,255,0.8); text-align: center;" id="previewHeadline">Professional Headline</div>
                        <div class="cv-contact" id="previewContact">
                            your.email@example.com | +1 (555) 123-4567
                        </div>
                    </div>
                    <div class="cv-body">
                        <div class="cv-section">
                            <div class="cv-section-title">Education</div>
                            <div class="cv-section-content" id="previewEducation">Your education details will appear here</div>
                        </div>
                        <div class="cv-section">
                            <div class="cv-section-title">Skills</div>
                            <div class="cv-section-content" id="previewSkills">Your skills will appear here</div>
                        </div>
                        <div class="cv-section">
                            <div class="cv-section-title">Experience</div>
                            <div class="cv-section-content" id="previewExperience">Your work experience will appear here</div>
                        </div>
                        ${standardFields}
                    </div>
                `;
            } else if (currentTemplate === 'traditional') {
                cvContent.innerHTML = `
                    <div class="cv-header">
                        <img id="previewPhoto" class="cv-photo" style="display: none;">
                        <div class="cv-name" id="previewName">Your Name</div>
                        <div style="font-style: italic; margin-bottom: 10px; color: #666;" id="previewHeadline">Professional Headline</div>
                        <div class="cv-contact" id="previewContact">
                            your.email@example.com | +1 (555) 123-4567
                        </div>
                    </div>
                    <div class="cv-section">
                        <div class="cv-section-title">Education</div>
                        <div class="cv-section-content" id="previewEducation">Your education details will appear here</div>
                    </div>
                    <div class="cv-section">
                        <div class="cv-section-title">Skills</div>
                        <div class="cv-section-content" id="previewSkills">Your skills will appear here</div>
                    </div>
                    <div class="cv-section">
                        <div class="cv-section-title">Experience</div>
                        <div class="cv-section-content" id="previewExperience">Your work experience will appear here</div>
                    </div>
                    ${standardFields}
                `;
            } else if (currentTemplate === 'ats') {
                cvContent.innerHTML = `
                    <div class="cv-header">
                        <div class="cv-name" id="previewName">Your Name</div>
                        <div style="font-style: italic; margin-bottom: 8px; color: #333;" id="previewHeadline">Professional Headline</div>
                        <div class="cv-contact" id="previewContact">
                            your.email@example.com | +1 (555) 123-4567
                        </div>
                    </div>
                    <div class="cv-section">
                        <div class="cv-section-title">Education</div>
                        <div class="cv-section-content" id="previewEducation">Your education details will appear here</div>
                    </div>
                    <div class="cv-section">
                        <div class="cv-section-title">Skills</div>
                        <div class="cv-section-content" id="previewSkills">Your skills will appear here</div>
                    </div>
                    <div class="cv-section">
                        <div class="cv-section-title">Experience</div>
                        <div class="cv-section-content" id="previewExperience">Your work experience will appear here</div>
                    </div>
                    ${standardFields}
                `;
            } else if (currentTemplate === 'linkedin') {
                cvContent.innerHTML = `
                    <div class="cv-header">
                        <div class="cv-header-content">
                            <img id="previewPhoto" class="cv-photo" style="display: none;">
                            <div class="cv-header-text">
                                <div class="cv-name" id="previewName">Your Name</div>
                                <div class="cv-headline" id="previewHeadline">Professional Headline</div>
                                <div class="cv-contact" id="previewContact">
                                    your.email@example.com | +1 (555) 123-4567
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="cv-body">
                        <div class="cv-section">
                            <div class="cv-section-title">Education</div>
                            <div class="cv-section-content" id="previewEducation">Your education details will appear here</div>
                        </div>
                        <div class="cv-section">
                            <div class="cv-section-title">Skills</div>
                            <div class="cv-section-content" id="previewSkills">Your skills will appear here</div>
                        </div>
                        <div class="cv-section">
                            <div class="cv-section-title">Experience</div>
                            <div class="cv-section-content" id="previewExperience">Your work experience will appear here</div>
                        </div>
                        ${standardFields}
                    </div>
                `;
            } else if (currentTemplate === 'professional') {
                cvContent.innerHTML = `
                    <div class="cv-header">
                        <img id="previewPhoto" class="cv-photo" style="display: none;">
                        <div class="cv-header-text">
                            <div class="cv-name" id="previewName">Your Name</div>
                            <div style="font-style: italic; margin-bottom: 10px; color: rgba(255,255,255,0.8);" id="previewHeadline">Professional Headline</div>
                            <div class="cv-contact" id="previewContact">
                                your.email@example.com | +1 (555) 123-4567
                            </div>
                        </div>
                    </div>
                    <div class="cv-body">
                        <div class="cv-section">
                            <div class="cv-section-title">Education</div>
                            <div class="cv-section-content" id="previewEducation">Your education details will appear here</div>
                        </div>
                        <div class="cv-section">
                            <div class="cv-section-title">Skills</div>
                            <div class="cv-section-content" id="previewSkills">Your skills will appear here</div>
                        </div>
                        <div class="cv-section">
                            <div class="cv-section-title">Experience</div>
                            <div class="cv-section-content" id="previewExperience">Your work experience will appear here</div>
                        </div>
                        ${standardFields}
                    </div>
                `;
            } else if (currentTemplate === 'premium') {
                cvContent.innerHTML = `
                    <div class="cv-header">
                        <img id="previewPhoto" class="cv-photo" style="display: none;">
                        <div class="cv-name" id="previewName">Your Name</div>
                        <div style="font-style: italic; margin-bottom: 10px; color: rgba(255,255,255,0.8); text-align: center;" id="previewHeadline">Professional Headline</div>
                        <div class="cv-contact" id="previewContact">
                            your.email@example.com | +1 (555) 123-4567
                        </div>
                    </div>
                    <div class="cv-body">
                        <div class="cv-section">
                            <div class="cv-section-title">Education</div>
                            <div class="cv-section-content" id="previewEducation">Your education details will appear here</div>
                        </div>
                        <div class="cv-section">
                            <div class="cv-section-title">Skills</div>
                            <div class="cv-section-content" id="previewSkills">Your skills will appear here</div>
                        </div>
                        <div class="cv-section">
                            <div class="cv-section-title">Experience</div>
                            <div class="cv-section-content" id="previewExperience">Your work experience will appear here</div>
                        </div>
                        ${standardFields}
                    </div>
                `;
            } else if (currentTemplate === 'modern') {
                cvContent.innerHTML = `
                    <div class="cv-sidebar">
                        <img id="previewPhoto" class="cv-photo" style="display: none;">
                        <div class="cv-name" id="previewName">Your Name</div>
                        <div style="font-style: italic; margin-bottom: 15px; color: rgba(255,255,255,0.8); font-size: 0.9rem; text-align: center;" id="previewHeadline">Professional Headline</div>
                        <div class="cv-contact" id="previewContact">
                            <div>your.email@example.com</div>
                            <div>+1 (555) 123-4567</div>
                        </div>
                        <div class="cv-section">
                            <div class="cv-section-title">Skills</div>
                            <div class="cv-section-content" id="previewSkills">Your skills will appear here</div>
                        </div>
                        <div class="cv-section" id="languagesSection" style="display: none;">
                            <div class="cv-section-title">Languages</div>
                            <div class="cv-section-content" id="previewLanguages"></div>
                        </div>
                    </div>
                    <div class="cv-main">
                        <div class="cv-section">
                            <div class="cv-section-title">Education</div>
                            <div class="cv-section-content" id="previewEducation">Your education details will appear here</div>
                        </div>
                        <div class="cv-section">
                            <div class="cv-section-title">Experience</div>
                            <div class="cv-section-content" id="previewExperience">Your work experience will appear here</div>
                        </div>
                        <div class="cv-section" id="certificatesSection" style="display: none;">
                            <div class="cv-section-title">Certificates & Awards</div>
                            <div class="cv-section-content" id="previewCertificates"></div>
                        </div>
                        <div class="cv-section" id="hobbiesSection" style="display: none;">
                            <div class="cv-section-title">Hobbies & Interests</div>
                            <div class="cv-section-content" id="previewHobbies"></div>
                        </div>
                    </div>
                `;
            } else if (currentTemplate === 'creative') {
                cvContent.innerHTML = `
                    <div class="cv-content">
                        <div class="cv-header">
                            <img id="previewPhoto" class="cv-photo" style="display: none;">
                            <div class="cv-name" id="previewName">Your Name</div>
                            <div style="font-style: italic; margin-bottom: 10px; color: rgba(255,255,255,0.9);" id="previewHeadline">Professional Headline</div>
                            <div class="cv-contact" id="previewContact">
                                your.email@example.com | +1 (555) 123-4567
                            </div>
                        </div>
                        <div class="cv-section">
                            <div class="cv-section-title">Education</div>
                            <div class="cv-section-content" id="previewEducation">Your education details will appear here</div>
                        </div>
                        <div class="cv-section">
                            <div class="cv-section-title">Skills</div>
                            <div class="cv-section-content" id="previewSkills">Your skills will appear here</div>
                        </div>
                        <div class="cv-section">
                            <div class="cv-section-title">Experience</div>
                            <div class="cv-section-content" id="previewExperience">Your work experience will appear here</div>
                        </div>
                        ${standardFields}
                    </div>
                `;
            } else {
                // Classic template
                cvContent.innerHTML = `
                    <div class="cv-header">
                        <img id="previewPhoto" class="cv-photo" style="display: none;">
                        <div class="cv-name" id="previewName">Your Name</div>
                        <div style="font-style: italic; margin-bottom: 10px; color: #666;" id="previewHeadline">Professional Headline</div>
                        <div class="cv-contact" id="previewContact">
                            Email: your.email@example.com<br>Phone: +1 (555) 123-4567<br>LinkedIn: linkedin.com/in/yourname
                        </div>
                    </div>
                    <div class="cv-section">
                        <div class="cv-section-title">Education</div>
                        <div class="cv-section-content" id="previewEducation">Your education details will appear here</div>
                    </div>
                    <div class="cv-section">
                        <div class="cv-section-title">Skills</div>
                        <div class="cv-section-content" id="previewSkills">Your skills will appear here</div>
                    </div>
                    <div class="cv-section">
                        <div class="cv-section-title">Experience</div>
                        <div class="cv-section-content" id="previewExperience">Your work experience will appear here</div>
                    </div>
                    ${standardFields}
                `;
            }

            // Re-assign preview elements after template change
            preview.name = document.getElementById('previewName');
            preview.email = document.getElementById('previewEmail');
            preview.phone = document.getElementById('previewPhone');
            preview.contact = document.getElementById('previewContact');
            preview.headline = document.getElementById('previewHeadline');
            preview.education = document.getElementById('previewEducation');
            preview.skills = document.getElementById('previewSkills');
            preview.experience = document.getElementById('previewExperience');
            preview.languages = document.getElementById('previewLanguages');
            preview.certificates = document.getElementById('previewCertificates');
            preview.hobbies = document.getElementById('previewHobbies');
        }

        function downloadPDF() {
            if (!paymentCompleted) {
                alert('Please complete payment first to download your CV.');
                return;
            }
            
            const element = document.getElementById('cvPreview');
            const name = inputs.fullName.value || 'CV';
            
            const downloadBtn = document.querySelector('.download-btn');
            const originalText = downloadBtn.textContent;
            downloadBtn.textContent = '📄 Generating PDF...';
            downloadBtn.disabled = true;

            // Ensure photo is properly set before PDF generation
            const photoElement = document.getElementById('previewPhoto');
            if (photoElement && photoDataUrl) {
                photoElement.src = photoDataUrl;
                photoElement.style.display = 'block';
                photoElement.crossOrigin = 'anonymous';
            }

            const opt = {
                margin: 0.5,
                filename: `${name.replace(/\s+/g, '_')}_CV.pdf`,
                image: { type: 'jpeg', quality: 0.98 },
                html2canvas: { 
                    scale: 2,
                    useCORS: true,
                    allowTaint: true,
                    backgroundColor: '#ffffff',
                    onclone: function(clonedDoc) {
                        // Ensure photo is set in cloned document
                        const clonedPhoto = clonedDoc.querySelector('#previewPhoto');
                        if (clonedPhoto && photoDataUrl) {
                            clonedPhoto.src = photoDataUrl;
                            clonedPhoto.style.display = 'block';
                            clonedPhoto.crossOrigin = 'anonymous';
                        }
                    }
                },
                jsPDF: { unit: 'in', format: 'a4', orientation: 'portrait' }
            };

            // Wait a moment for image to load, then generate PDF
            setTimeout(() => {
                html2pdf().set(opt).from(element).save().then(() => {
                    downloadBtn.textContent = originalText;
                    downloadBtn.disabled = false;
                }).catch((error) => {
                    console.error('PDF generation failed:', error);
                    downloadBtn.textContent = originalText;
                    downloadBtn.disabled = false;
                    alert('PDF generation failed. Please try again.');
                });
            }, 500);
        }

        // Theme toggle functionality
        function toggleTheme() {
            const body = document.body;
            const themeToggle = document.querySelector('.theme-toggle');
            
            body.classList.toggle('dark-mode');
            
            if (body.classList.contains('dark-mode')) {
                themeToggle.textContent = '☀️';
                localStorage.setItem('theme', 'dark');
            } else {
                themeToggle.textContent = '🌙';
                localStorage.setItem('theme', 'light');
            }
        }

        // Load saved theme
        function loadTheme() {
            const savedTheme = localStorage.getItem('theme');
            const body = document.body;
            const themeToggle = document.querySelector('.theme-toggle');
            
            if (savedTheme === 'dark') {
                body.classList.add('dark-mode');
                themeToggle.textContent = '☀️';
            } else {
                themeToggle.textContent = '🌙';
            }
        }

        // Chatbot functionality
        function toggleChatbot() {
            const chatbotWindow = document.getElementById('chatbotWindow');
            chatbotWindow.style.display = chatbotWindow.style.display === 'flex' ? 'none' : 'flex';
        }

        function handleChatbotEnter(event) {
            if (event.key === 'Enter') {
                sendChatbotMessage();
            }
        }

        function sendChatbotMessage() {
            const input = document.getElementById('chatbotInput');
            const messagesContainer = document.getElementById('chatbotMessages');
            const message = input.value.trim();
            
            if (!message) return;
            
            // Add user message
            const userMessage = document.createElement('div');
            userMessage.className = 'chatbot-message user';
            userMessage.textContent = message;
            messagesContainer.appendChild(userMessage);
            
            // Clear input
            input.value = '';
            
            // Generate bot response
            setTimeout(() => {
                const botMessage = document.createElement('div');
                botMessage.className = 'chatbot-message bot';
                botMessage.innerHTML = generateBotResponse(message);
                messagesContainer.appendChild(botMessage);
                
                // Scroll to bottom
                messagesContainer.scrollTop = messagesContainer.scrollHeight;
            }, 1000);
            
            // Scroll to bottom
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function generateBotResponse(userMessage) {
            const msg = userMessage.toLowerCase();
            
            // Content overflow and template space questions
            if (msg.includes('overflow') || msg.includes('warning') || msg.includes('too much') || msg.includes('fit') || msg.includes('space') || msg.includes('content') && (msg.includes('long') || msg.includes('much'))) {
                return "⚠️ <strong>Content Overflow System:</strong><br><br>I monitor your content in real-time! When you type too much for your selected template, you'll see a red warning above the preview. Each template has different space limits:<br><br>📊 <strong>Most Space:</strong> ATS Optimized (12 lines experience)<br>📊 <strong>Good Space:</strong> Modern, Traditional, Classic (8-10 lines)<br>📊 <strong>Limited Space:</strong> Professional, Premium, Executive (5-6 lines)<br><br>💡 <strong>Solutions:</strong><br>• Shorten your content to key points<br>• Switch to a template with more space<br>• Use bullet points instead of paragraphs<br>• Focus on most recent/relevant experience";
            }
            
            // Template comparison and recommendations
            if (msg.includes('which template') || msg.includes('best template') || msg.includes('recommend') || msg.includes('choose template')) {
                return "🎯 <strong>Template Recommendations:</strong><br><br>📝 <strong>Lots of Experience?</strong> → ATS Optimized or Modern<br>🎨 <strong>Creative Field?</strong> → Creative or Modern<br>💼 <strong>Corporate Job?</strong> → Professional or Executive<br>📚 <strong>Entry Level?</strong> → Classic or Traditional<br>🤖 <strong>Online Applications?</strong> → ATS Optimized<br><br>💡 <strong>Pro Tip:</strong> Start with ATS Optimized if you have lots of content, then switch to a prettier template if everything fits!";
            }
            
            // Specific template questions
            if (msg.includes('professional template') || msg.includes('premium template') || msg.includes('executive template')) {
                return "⚠️ <strong>Compact Templates Warning:</strong><br><br>Professional, Premium, and Executive templates have <strong>limited space</strong> due to their elegant headers and design elements:<br><br>📏 <strong>Professional:</strong> 6 lines max for experience<br>📏 <strong>Premium:</strong> 6 lines max for experience<br>📏 <strong>Executive:</strong> 5 lines max for experience<br><br>💡 <strong>Best for:</strong><br>• Senior professionals with concise experience<br>• Executive-level positions<br>• When you want maximum visual impact<br><br>🔄 <strong>Alternative:</strong> Try Modern template for similar style with more space!";
            }
            
            // Privacy related questions
            if (msg.includes('privacy') || msg.includes('data') || msg.includes('secure') || msg.includes('safe')) {
                return "🔒 Your privacy is our priority! We use industry-standard encryption, never share your data with third parties, and automatically delete all uploaded information after PDF generation. Your personal details are processed securely and stored temporarily only during the CV creation process.";
            }
            
            // Payment related questions
            if (msg.includes('payment') || msg.includes('pay') || msg.includes('cost') || msg.includes('price') || msg.includes('refund')) {
                return "💳 Our service costs $1.00 for one CV generation. Payment is processed securely through encrypted channels. Please note: each payment allows ONE CV download only, and refunds aren't available after successful PDF generation. Make sure your information is complete and fits properly before paying!";
            }
            
            // Template questions
            if (msg.includes('template') || msg.includes('design') || msg.includes('style')) {
                return "🎨 We offer 9 professional templates with different space capacities:<br><br><strong>🏆 Most Space:</strong><br>• ATS Optimized - Plain but roomy<br>• Modern - Two-column with good balance<br><br><strong>⚖️ Balanced Space:</strong><br>• Classic - Traditional single column<br>• Traditional - Formal layout<br>• LinkedIn - Professional social style<br><br><strong>🎭 Stylish but Compact:</strong><br>• Creative - Colorful gradient<br>• Professional - Corporate with photo<br>• Premium - Elegant with decorations<br>• Executive - Luxury design<br><br>💡 Watch for the red overflow warning when typing!";
            }
            
            // CV writing tips with overflow awareness
            if (msg.includes('tips') || msg.includes('help') || msg.includes('advice') || msg.includes('write') || msg.includes('resume')) {
                return "✍️ <strong>Smart CV Writing Tips:</strong><br><br><strong>📏 Content Length:</strong><br>• Watch the overflow warning above preview<br>• Use bullet points (•) instead of paragraphs<br>• Focus on last 10 years of experience<br>• Quantify achievements with numbers<br><br><strong>📝 Writing Style:</strong><br>• Start with action verbs (developed, managed, led)<br>• Keep bullet points to 1-2 lines each<br>• Use keywords from job descriptions<br>• Avoid personal pronouns (I, me, my)<br><br><strong>🎯 Content Priority:</strong><br>• Most recent experience first<br>• Relevant skills for target job<br>• Measurable achievements<br>• Professional email address";
            }
            
            // Technical questions
            if (msg.includes('download') || msg.includes('pdf') || msg.includes('format') || msg.includes('file')) {
                return "📄 After payment, you'll get a high-quality PDF file that's perfect for printing or digital sharing. The PDF maintains all formatting and is compatible with all devices. Download happens instantly after successful payment! The system ensures your content fits perfectly on A4 pages.";
            }
            
            // Photo questions
            if (msg.includes('photo') || msg.includes('picture') || msg.includes('image')) {
                return "📸 You can upload a professional headshot in JPG, PNG, or other common formats. The photo will be automatically resized and positioned perfectly in your chosen template. For best results, use a clear, professional photo with good lighting! Note: ATS template hides photos for better compatibility with tracking systems.";
            }
            
            // Line limits and content questions
            if (msg.includes('lines') || msg.includes('limit') || msg.includes('how much') || msg.includes('how many')) {
                return "📊 <strong>Template Content Limits:</strong><br><br><strong>🔢 Experience Section:</strong><br>• ATS: 12 lines • Modern: 10 lines<br>• Classic/Traditional: 8 lines<br>• LinkedIn: 8 lines • Creative: 7 lines<br>• Professional/Premium: 6 lines<br>• Executive: 5 lines<br><br><strong>🎓 Education Section:</strong><br>• ATS: 6 lines • Modern: 5 lines<br>• Others: 3-4 lines<br><br><strong>🛠️ Skills Section:</strong><br>• ATS/Modern: 8 lines<br>• Classic/Traditional: 6 lines<br>• Others: 4-5 lines<br><br>💡 These are recommendations - the system will warn you if you exceed them!";
            }
            
            // Contact questions
            if (msg.includes('contact') || msg.includes('support') || msg.includes('problem')) {
                return "📧 For any technical issues, questions, or support needs, please contact our developer directly at <strong>tonyazer86@gmail.com</strong>. We typically respond within 24 hours and are happy to help with any concerns!";
            }
            
            // Greeting responses
            if (msg.includes('hello') || msg.includes('hi') || msg.includes('hey') || msg.includes('good')) {
                return "👋 Hello! I'm your smart CV assistant. I can help you with templates, content optimization, overflow warnings, and writing tips. I also monitor your content in real-time to ensure it fits perfectly! What would you like to know?";
            }
            
            // Thank you responses
            if (msg.includes('thank') || msg.includes('thanks')) {
                return "😊 You're very welcome! I'm glad I could help. Remember to watch for the overflow warning as you type - it'll help you create the perfect CV that fits beautifully in your chosen template!";
            }
            
            // ATS questions
            if (msg.includes('ats') || msg.includes('applicant tracking') || msg.includes('tracking system')) {
                return "🤖 <strong>ATS (Applicant Tracking System) Info:</strong><br><br>Our ATS Optimized template is designed to pass through automated screening systems:<br><br>✅ <strong>ATS-Friendly Features:</strong><br>• Plain text formatting<br>• No photos or graphics<br>• Standard section headings<br>• Simple bullet points<br>• Maximum content space (12 lines for experience!)<br><br>💡 <strong>When to Use:</strong><br>• Applying through company websites<br>• Large corporations<br>• When you have lots of experience to include<br><br>🎯 <strong>Pro Tip:</strong> Use ATS template first to fit all content, then try other templates if you want something prettier!";
            }
            
            // Default response for unrecognized questions
            return `🤔 I'm not sure about that specific question, but I'd be happy to help! I can assist with:<br><br>• 📊 Template space limits and overflow warnings<br>• 🎨 Template recommendations based on your needs<br>• ✍️ CV writing tips and content optimization<br>• 💳 Payment and pricing details<br>• 🔒 Privacy and security questions<br>• 🤖 ATS optimization advice<br>• 📄 PDF generation and technical support<br><br>For anything else, please contact our developer directly at <strong>tonyazer86@gmail.com</strong> - they'll be able to give you a detailed answer within 24 hours!`;
        }

        // Authentication System
        let currentUser = null;
        let userDatabase = JSON.parse(localStorage.getItem('cvcraft_users') || '{}');
        let userSessions = JSON.parse(localStorage.getItem('cvcraft_sessions') || '{}');

        // Check if user is logged in on page load
        function checkAuthStatus() {
            const sessionToken = localStorage.getItem('cvcraft_session');
            if (sessionToken && userSessions[sessionToken]) {
                const userData = userSessions[sessionToken];
                if (userData.expires > Date.now()) {
                    currentUser = userData;
                    showUserInterface();
                    return true;
                }
            }
            showGuestInterface();
            return false;
        }

        function showUserInterface() {
            document.getElementById('authButtons').style.display = 'none';
            document.getElementById('userMenu').style.display = 'block';
            document.getElementById('userAvatar').textContent = currentUser.name.split(' ').map(n => n[0]).join('').toUpperCase();
            document.getElementById('dashboardUserName').textContent = currentUser.name;
            showDashboard();
        }

        function showGuestInterface() {
            document.getElementById('authButtons').style.display = 'flex';
            document.getElementById('userMenu').style.display = 'none';
            showCVBuilder();
        }

        function showAuthModal(type) {
            const modal = document.getElementById('authModal');
            modal.classList.add('active');
            switchAuthTab(type);
        }

        function closeAuthModal() {
            document.getElementById('authModal').classList.remove('active');
        }

        function switchAuthTab(type) {
            // Update tabs
            document.querySelectorAll('.auth-tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.auth-form').forEach(form => form.classList.remove('active'));
            
            if (type === 'login') {
                document.querySelector('.auth-tab:first-child').classList.add('active');
                document.getElementById('loginForm').classList.add('active');
                document.getElementById('modalTitle').textContent = 'Welcome Back!';
                document.getElementById('modalSubtitle').textContent = 'Sign in to access your dashboard';
            } else if (type === 'signup') {
                document.querySelector('.auth-tab:last-child').classList.add('active');
                document.getElementById('signupForm').classList.add('active');
                document.getElementById('modalTitle').textContent = 'Join CVCraft Pro';
                document.getElementById('modalSubtitle').textContent = 'Create your account in seconds';
            }
        }

        function showForgotPassword() {
            document.querySelectorAll('.auth-form').forEach(form => form.classList.remove('active'));
            document.getElementById('forgotForm').classList.add('active');
            document.getElementById('modalTitle').textContent = 'Reset Password';
            document.getElementById('modalSubtitle').textContent = 'Enter your email to receive reset instructions';
        }

        function handleLogin(event) {
            event.preventDefault();
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            
            if (userDatabase[email] && userDatabase[email].password === password) {
                // Create session
                const sessionToken = 'session_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
                const sessionData = {
                    ...userDatabase[email],
                    expires: Date.now() + (7 * 24 * 60 * 60 * 1000) // 7 days
                };
                
                userSessions[sessionToken] = sessionData;
                localStorage.setItem('cvcraft_sessions', JSON.stringify(userSessions));
                localStorage.setItem('cvcraft_session', sessionToken);
                
                currentUser = sessionData;
                closeAuthModal();
                showUserInterface();
                
                // Show success message
                showNotification('Welcome back! Login successful.', 'success');
            } else {
                showNotification('Invalid email or password. Please try again.', 'error');
            }
        }

        function handleSignup(event) {
            event.preventDefault();
            const name = document.getElementById('signupName').value;
            const email = document.getElementById('signupEmail').value;
            const password = document.getElementById('signupPassword').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
            const agreeTerms = document.getElementById('agreeTerms').checked;
            
            // Validation
            if (password !== confirmPassword) {
                showNotification('Passwords do not match!', 'error');
                return;
            }
            
            if (!agreeTerms) {
                showNotification('Please agree to the Terms of Service and Privacy Policy.', 'error');
                return;
            }
            
            if (userDatabase[email]) {
                showNotification('An account with this email already exists.', 'error');
                return;
            }
            
            // Create user
            const userData = {
                name: name,
                email: email,
                password: password, // In real app, this would be hashed
                createdAt: Date.now(),
                cvHistory: [],
                paymentHistory: []
            };
            
            userDatabase[email] = userData;
            localStorage.setItem('cvcraft_users', JSON.stringify(userDatabase));
            
            // Auto login
            const sessionToken = 'session_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
            const sessionData = {
                ...userData,
                expires: Date.now() + (7 * 24 * 60 * 60 * 1000)
            };
            
            userSessions[sessionToken] = sessionData;
            localStorage.setItem('cvcraft_sessions', JSON.stringify(userSessions));
            localStorage.setItem('cvcraft_session', sessionToken);
            
            currentUser = sessionData;
            closeAuthModal();
            showUserInterface();
            
            showNotification('Account created successfully! Welcome to CVCraft Pro.', 'success');
        }

        function handleForgotPassword(event) {
            event.preventDefault();
            const email = document.getElementById('forgotEmail').value;
            
            if (userDatabase[email]) {
                // In a real app, this would send an actual email
                showNotification('Password reset link sent to your email!', 'success');
                setTimeout(() => {
                    switchAuthTab('login');
                }, 2000);
            } else {
                showNotification('No account found with this email address.', 'error');
            }
        }

        function logout() {
            const sessionToken = localStorage.getItem('cvcraft_session');
            if (sessionToken) {
                delete userSessions[sessionToken];
                localStorage.setItem('cvcraft_sessions', JSON.stringify(userSessions));
                localStorage.removeItem('cvcraft_session');
            }
            
            currentUser = null;
            showGuestInterface();
            showNotification('Logged out successfully!', 'success');
        }

        function toggleUserMenu() {
            const dropdown = document.getElementById('userDropdown');
            dropdown.style.display = dropdown.style.display === 'block' ? 'none' : 'block';
        }

        // Close dropdown when clicking outside
        document.addEventListener('click', function(event) {
            const userMenu = document.getElementById('userMenu');
            const dropdown = document.getElementById('userDropdown');
            if (!userMenu.contains(event.target)) {
                dropdown.style.display = 'none';
            }
        });

        // Navigation functions
        // Helper function to hide all pages
        function hideAllPages() {
            document.getElementById('dashboard').classList.remove('active');
            document.getElementById('cvBuilder').classList.remove('active');
            document.getElementById('featuresPage').style.display = 'none';
            document.getElementById('profilePage').style.display = 'none';
            document.getElementById('settingsPage').style.display = 'none';
        }

        function showHome() {
            hideAllPages();
            // In a real app, this would show a home page
            if (currentUser) {
                showDashboard();
            } else {
                showCVBuilder();
            }
        }

        function showDashboard() {
            hideAllPages();
            document.getElementById('dashboard').classList.add('active');
            loadUserData();
        }

        function showCVBuilder() {
            hideAllPages();
            document.getElementById('cvBuilder').classList.add('active');
        }

        function showFeatures() {
            hideAllPages();
            document.getElementById('featuresPage').style.display = 'block';
        }

        function showProfile() {
            hideAllPages();
            document.getElementById('profilePage').style.display = 'block';
            loadProfileData();
        }

        function showSettings() {
            hideAllPages();
            document.getElementById('settingsPage').style.display = 'block';
            loadSettingsData();
        }

        function loadProfileData() {
            if (!currentUser) return;
            
            const user = userDatabase[currentUser.email];
            if (user) {
                // Update profile header
                const nameParts = user.name.split(' ');
                const initials = nameParts.map(n => n[0]).join('').toUpperCase();
                document.getElementById('profileAvatar').textContent = initials;
                document.getElementById('profileUserName').textContent = user.name;
                document.getElementById('profileUserEmail').textContent = user.email;
                
                const memberSince = new Date(user.createdAt).toLocaleDateString('en-US', { 
                    year: 'numeric', 
                    month: 'long' 
                });
                document.getElementById('profileMemberSince').textContent = memberSince;
                
                // Fill form fields
                const firstName = nameParts[0] || '';
                const lastName = nameParts.slice(1).join(' ') || '';
                document.getElementById('profileFirstName').value = firstName;
                document.getElementById('profileLastName').value = lastName;
                document.getElementById('profileEmailEdit').value = user.email;

                
                // Update statistics
                const cvCount = user.cvHistory ? user.cvHistory.length : 0;
                const totalSpent = user.paymentHistory ? user.paymentHistory.reduce((sum, payment) => sum + parseFloat(payment.amount), 0).toFixed(2) : '0.00';
                const daysActive = Math.ceil((Date.now() - user.createdAt) / (1000 * 60 * 60 * 24));
                const lastLogin = new Date().toLocaleDateString();
                
                document.getElementById('profileCVCount').textContent = cvCount;
                document.getElementById('profileTotalSpent').textContent = `$${totalSpent}`;
                document.getElementById('profileDaysActive').textContent = daysActive;
                document.getElementById('profileLastLogin').textContent = lastLogin;
            }
        }

        function saveProfile() {
            if (!currentUser) return;
            
            const firstName = document.getElementById('profileFirstName').value.trim();
            const lastName = document.getElementById('profileLastName').value.trim();
            const email = document.getElementById('profileEmailEdit').value.trim();
            
            if (!firstName || !email) {
                showNotification('First name and email are required!', 'error');
                return;
            }
            
            // Check if email is already taken by another user
            if (email !== currentUser.email && userDatabase[email]) {
                showNotification('This email is already taken by another user!', 'error');
                return;
            }
            
            const fullName = `${firstName} ${lastName}`.trim();
            const oldEmail = currentUser.email;
            
            // Update user data
            const userData = userDatabase[oldEmail];
            userData.name = fullName;
            
            // If email changed, update the database key
            if (email !== oldEmail) {
                userData.email = email;
                userDatabase[email] = userData;
                delete userDatabase[oldEmail];
                
                // Update current session
                currentUser.email = email;
                currentUser.name = fullName;
                
                // Update session storage
                const sessionToken = localStorage.getItem('cvcraft_session');
                if (sessionToken && userSessions[sessionToken]) {
                    userSessions[sessionToken] = { ...userData, expires: userSessions[sessionToken].expires };
                    localStorage.setItem('cvcraft_sessions', JSON.stringify(userSessions));
                }
            }
            
            localStorage.setItem('cvcraft_users', JSON.stringify(userDatabase));
            
            // Update UI
            document.getElementById('userAvatar').textContent = fullName.split(' ').map(n => n[0]).join('').toUpperCase();
            document.getElementById('dashboardUserName').textContent = fullName.split(' ')[0];
            
            showNotification('Profile updated successfully!', 'success');
            loadProfileData(); // Refresh the display
        }

        function cancelProfileEdit() {
            loadProfileData(); // Reset form to original values
            showNotification('Changes cancelled', 'info');
        }

        function changePassword() {
            if (!currentUser) return;
            
            const currentPassword = document.getElementById('currentPassword').value;
            const newPassword = document.getElementById('newPassword').value;
            const confirmNewPassword = document.getElementById('confirmNewPassword').value;
            
            if (!currentPassword || !newPassword || !confirmNewPassword) {
                showNotification('All password fields are required!', 'error');
                return;
            }
            
            const user = userDatabase[currentUser.email];
            if (user.password !== currentPassword) {
                showNotification('Current password is incorrect!', 'error');
                return;
            }
            
            if (newPassword !== confirmNewPassword) {
                showNotification('New passwords do not match!', 'error');
                return;
            }
            
            if (newPassword.length < 8) {
                showNotification('New password must be at least 8 characters long!', 'error');
                return;
            }
            
            // Update password
            user.password = newPassword;
            localStorage.setItem('cvcraft_users', JSON.stringify(userDatabase));
            
            // Clear form
            document.getElementById('currentPassword').value = '';
            document.getElementById('newPassword').value = '';
            document.getElementById('confirmNewPassword').value = '';
            
            showNotification('Password updated successfully!', 'success');
        }

        function loadSettingsData() {
            // Load current theme setting
            const isDarkMode = document.body.classList.contains('dark-mode');
            document.getElementById('darkModeToggle').checked = isDarkMode;
            
            // Update toggle appearance
            updateToggleAppearance('darkModeToggle', isDarkMode);
        }

        function toggleHistory() {
            const historyDiv = document.getElementById('combinedHistory');
            const toggleBtn = document.getElementById('historyToggleBtn');
            
            if (historyDiv.style.display === 'none') {
                historyDiv.style.display = 'block';
                toggleBtn.innerHTML = '<i class="fas fa-eye-slash"></i> Hide History';
                loadCombinedHistory();
            } else {
                historyDiv.style.display = 'none';
                toggleBtn.innerHTML = '<i class="fas fa-eye"></i> Show History';
            }
        }

        function updateToggleAppearance(toggleId, isChecked) {
            const toggle = document.getElementById(toggleId);
            const slider = toggle.nextElementSibling;
            const knob = slider.nextElementSibling;
            
            if (isChecked) {
                slider.style.backgroundColor = '#3498db';
                knob.style.transform = 'translateX(26px)';
            } else {
                slider.style.backgroundColor = '#ccc';
                knob.style.transform = 'translateX(0px)';
            }
        }

        function toggleThemeFromSettings() {
            toggleTheme();
            const isDarkMode = document.body.classList.contains('dark-mode');
            updateToggleAppearance('darkModeToggle', isDarkMode);
        }



        function saveSettings() {
            const settings = {
                darkMode: document.body.classList.contains('dark-mode')
            };
            
            localStorage.setItem('cvcraft_settings', JSON.stringify(settings));
            showNotification('Settings saved successfully!', 'success');
        }

        function setup2FA() {
            showNotification('Two-Factor Authentication setup coming soon! This feature will be available in the next update.', 'info');
        }

        function exportData() {
            if (!currentUser) {
                showNotification('Please login to export your data.', 'error');
                return;
            }
            
            const user = userDatabase[currentUser.email];
            const exportData = {
                profile: {
                    name: user.name,
                    email: user.email,
                    phone: user.phone || '',
                    company: user.company || '',
                    jobTitle: user.jobTitle || '',
                    bio: user.bio || '',
                    createdAt: user.createdAt
                },
                cvHistory: user.cvHistory || [],
                paymentHistory: user.paymentHistory || [],
                settings: JSON.parse(localStorage.getItem('cvcraft_settings') || '{}')
            };
            
            const dataStr = JSON.stringify(exportData, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(dataBlob);
            
            const link = document.createElement('a');
            link.href = url;
            link.download = `CVCraft_Pro_Data_${user.name.replace(/\s+/g, '_')}_${new Date().toISOString().split('T')[0]}.json`;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            URL.revokeObjectURL(url);
            
            showNotification('Data exported successfully!', 'success');
        }

        function clearAllData() {
            if (!currentUser) return;
            
            if (confirm('Are you sure you want to clear all your data? This action cannot be undone.\n\nThis will remove:\n• All your CVs\n• Payment history\n• Personal information\n• Settings\n\nType "DELETE" to confirm:')) {
                const confirmation = prompt('Type "DELETE" to confirm:');
                if (confirmation === 'DELETE') {
                    const user = userDatabase[currentUser.email];
                    user.cvHistory = [];
                    user.paymentHistory = [];
                    user.phone = '';
                    user.company = '';
                    user.jobTitle = '';
                    user.bio = '';
                    
                    localStorage.setItem('cvcraft_users', JSON.stringify(userDatabase));
                    localStorage.removeItem('cvcraft_settings');
                    
                    showNotification('All data cleared successfully!', 'success');
                    loadProfileData();
                    loadSettingsData();
                } else {
                    showNotification('Data clearing cancelled.', 'info');
                }
            }
        }

        function changePasswordFromSettings() {
            if (!currentUser) return;
            
            const currentPassword = document.getElementById('settingsCurrentPassword').value;
            const newPassword = document.getElementById('settingsNewPassword').value;
            const confirmNewPassword = document.getElementById('settingsConfirmNewPassword').value;
            
            if (!currentPassword || !newPassword || !confirmNewPassword) {
                showNotification('All password fields are required!', 'error');
                return;
            }
            
            const user = userDatabase[currentUser.email];
            if (user.password !== currentPassword) {
                showNotification('Current password is incorrect!', 'error');
                return;
            }
            
            if (newPassword !== confirmNewPassword) {
                showNotification('New passwords do not match!', 'error');
                return;
            }
            
            if (newPassword.length < 8) {
                showNotification('New password must be at least 8 characters long!', 'error');
                return;
            }
            
            // Update password
            user.password = newPassword;
            localStorage.setItem('cvcraft_users', JSON.stringify(userDatabase));
            
            // Clear form
            document.getElementById('settingsCurrentPassword').value = '';
            document.getElementById('settingsNewPassword').value = '';
            document.getElementById('settingsConfirmNewPassword').value = '';
            
            showNotification('Password updated successfully!', 'success');
        }

        function deleteAccount() {
            if (!currentUser) return;
            
            if (confirm('⚠️ WARNING: This will permanently delete your account and all data!\n\nThis action cannot be undone and will remove:\n• Your account\n• All CVs\n• Payment history\n• Personal information\n• All settings\n\nAre you absolutely sure?')) {
                const confirmation = prompt('Type "DELETE MY ACCOUNT" to confirm permanent deletion:');
                if (confirmation === 'DELETE MY ACCOUNT') {
                    const email = currentUser.email;
                    
                    // Remove user from database
                    delete userDatabase[email];
                    localStorage.setItem('cvcraft_users', JSON.stringify(userDatabase));
                    
                    // Clear session
                    const sessionToken = localStorage.getItem('cvcraft_session');
                    if (sessionToken) {
                        delete userSessions[sessionToken];
                        localStorage.setItem('cvcraft_sessions', JSON.stringify(userSessions));
                        localStorage.removeItem('cvcraft_session');
                    }
                    
                    // Clear settings
                    localStorage.removeItem('cvcraft_settings');
                    
                    // Reset UI
                    currentUser = null;
                    showGuestInterface();
                    showNotification('Account deleted successfully. We\'re sorry to see you go!', 'success');
                } else {
                    showNotification('Account deletion cancelled.', 'info');
                }
            }
        }

        function clearHistory() {
            if (!currentUser) {
                showNotification('Please login to clear history.', 'error');
                return;
            }
            
            if (confirm('Are you sure you want to clear all history? This will remove all CV and payment records.')) {
                const user = userDatabase[currentUser.email];
                user.cvHistory = [];
                user.paymentHistory = [];
                
                localStorage.setItem('cvcraft_users', JSON.stringify(userDatabase));
                
                // Refresh the history display if it's currently shown
                const historyDiv = document.getElementById('combinedHistory');
                if (historyDiv.style.display !== 'none') {
                    loadCombinedHistory();
                }
                
                // Update dashboard stats
                loadUserData();
                
                showNotification('History cleared successfully!', 'success');
            }
        }

        function loadCombinedHistory() {
            if (!currentUser) return;
            
            const user = userDatabase[currentUser.email];
            const historyContainer = document.getElementById('combinedHistory');
            
            if (!user) return;
            
            // Combine CV and payment history with timestamps
            const combinedItems = [];
            
            // Add CV history items
            if (user.cvHistory && user.cvHistory.length > 0) {
                user.cvHistory.forEach(cv => {
                    combinedItems.push({
                        type: 'cv',
                        timestamp: cv.createdAt,
                        data: cv
                    });
                });
            }
            
            // Add payment history items
            if (user.paymentHistory && user.paymentHistory.length > 0) {
                user.paymentHistory.forEach(payment => {
                    combinedItems.push({
                        type: 'payment',
                        timestamp: payment.date,
                        data: payment
                    });
                });
            }
            
            // Sort by timestamp (newest first)
            combinedItems.sort((a, b) => b.timestamp - a.timestamp);
            
            if (combinedItems.length > 0) {
                historyContainer.innerHTML = combinedItems.map(item => {
                    if (item.type === 'cv') {
                        return `
                            <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px; background: #f8f9fa; border-radius: 8px; margin-bottom: 8px; border-left: 3px solid #3498db;">
                                <div>
                                    <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 4px;">
                                        <i class="fas fa-file-alt" style="color: #3498db; font-size: 0.9rem;"></i>
                                        <strong style="font-size: 0.9rem;">${item.data.name}</strong>
                                    </div>
                                    <div style="font-size: 0.8rem; color: #666;">Created: ${new Date(item.timestamp).toLocaleDateString()}</div>
                                </div>
                                <div style="display: flex; align-items: center; gap: 8px;">
                                    <span style="padding: 2px 8px; background: #d4edda; color: #155724; border-radius: 12px; font-size: 0.75rem; font-weight: 600;">CV</span>
                                    <button onclick="downloadCV('${item.data.id}')" style="padding: 4px 8px; background: #3498db; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 0.8rem;">
                                        <i class="fas fa-download"></i>
                                    </button>
                                </div>
                            </div>
                        `;
                    } else {
                        return `
                            <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px; background: #f8f9fa; border-radius: 8px; margin-bottom: 8px; border-left: 3px solid #27ae60;">
                                <div>
                                    <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 4px;">
                                        <i class="fas fa-credit-card" style="color: #27ae60; font-size: 0.9rem;"></i>
                                        <strong style="font-size: 0.9rem;">CV Generation Payment</strong>
                                    </div>
                                    <div style="font-size: 0.8rem; color: #666;">${new Date(item.timestamp).toLocaleDateString()}</div>
                                </div>
                                <div style="display: flex; align-items: center; gap: 8px;">
                                    <span style="padding: 2px 8px; background: #d1ecf1; color: #0c5460; border-radius: 12px; font-size: 0.75rem; font-weight: 600;">$${item.data.amount}</span>
                                    <span style="padding: 2px 8px; background: #d4edda; color: #155724; border-radius: 12px; font-size: 0.75rem; font-weight: 600;">Paid</span>
                                </div>
                            </div>
                        `;
                    }
                }).join('');
            } else {
                historyContainer.innerHTML = '<p style="text-align: center; color: #666; padding: 15px; font-size: 0.9rem;">No activity yet. Create your first CV to see history here!</p>';
            }
        }

        function loadUserData() {
            if (!currentUser) return;
            
            // Update dashboard with user data
            const user = userDatabase[currentUser.email];
            if (user) {
                document.getElementById('dashboardUserName').textContent = user.name;

                // Update account statistics with real data
                const cvCount = user.cvHistory ? user.cvHistory.length : 0;
                const totalSpent = user.paymentHistory ? user.paymentHistory.reduce((sum, payment) => sum + parseFloat(payment.amount), 0).toFixed(2) : '0.00';
                const daysActive = Math.ceil((Date.now() - user.createdAt) / (1000 * 60 * 60 * 24));
                
                document.getElementById('userCVCount').textContent = cvCount;
                document.getElementById('userTotalSpent').textContent = `$${totalSpent}`;
                document.getElementById('userDaysActive').textContent = daysActive;
            }
        }

        function downloadCV(cvId) {
            showNotification('CV download started!', 'success');
            // In a real app, this would download the actual CV file
        }

        // Notification system
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 100px;
                right: 20px;
                background: ${type === 'success' ? '#27ae60' : type === 'error' ? '#e74c3c' : '#3498db'};
                color: white;
                padding: 15px 20px;
                border-radius: 10px;
                box-shadow: 0 10px 30px rgba(0,0,0,0.2);
                z-index: 3000;
                font-weight: 600;
                max-width: 300px;
                word-wrap: break-word;
                animation: slideIn 0.3s ease;
            `;
            
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 3000);
        }

        // Add CSS for notification animations
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideOut {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
        `;
        document.head.appendChild(style);

        // Check for payment completion on page load
        function checkPendingPayment() {
            const pendingCV = localStorage.getItem('cvcraft_pending_cv');
            if (pendingCV) {
                // Ask user if they completed payment
                setTimeout(() => {
                    const completed = confirm('It looks like you have a pending payment. Did you complete the PayPal payment? Click OK if yes, Cancel if no.');
                    if (completed) {
                        handlePaymentSuccess();
                    } else {
                        localStorage.removeItem('cvcraft_pending_cv');
                    }
                }, 1000);
            }
        }

        async function downloadPDF() {
            if (!paymentCompleted) {
                alert('Please complete payment first to download your CV.');
                return;
            }
            
            const element = document.getElementById('cvPreview');
            const name = inputs.fullName.value || 'CV';
            
            const downloadBtn = document.querySelector('#paymentSuccess .download-btn');
            const originalText = downloadBtn.textContent;
            downloadBtn.textContent = '📄 Generating PDF...';
            downloadBtn.disabled = true;

            try {
                // Update preview to ensure all data is current
                updatePreview();
                
                // Wait for DOM updates and images to load
                await new Promise(resolve => setTimeout(resolve, 1000));
                
                // Create a clone of the element for PDF generation
                const clonedElement = element.cloneNode(true);
                clonedElement.style.position = 'absolute';
                clonedElement.style.left = '-9999px';
                clonedElement.style.top = '0';
                clonedElement.style.width = '210mm';
                clonedElement.style.maxWidth = '210mm';
                clonedElement.style.minHeight = '297mm';
                clonedElement.style.boxSizing = 'border-box';
                clonedElement.style.overflow = 'visible';
                clonedElement.style.padding = '0';
                clonedElement.style.margin = '0';
                clonedElement.style.backgroundColor = '#ffffff';
                clonedElement.style.border = 'none';
                clonedElement.style.borderRadius = '0';
                clonedElement.style.boxShadow = 'none';
                
                // Optimize the CV content for perfect PDF fit
                const cvContent = clonedElement.querySelector('#cvContent');
                if (cvContent) {
                    optimizeForPerfectFit(cvContent);
                }
                
                document.body.appendChild(clonedElement);
                
                // Ensure photo is properly set in cloned element
                const photoElement = clonedElement.querySelector('#previewPhoto');
                if (photoElement && photoDataUrl) {
                    photoElement.src = photoDataUrl;
                    photoElement.style.display = 'block';
                    photoElement.crossOrigin = 'anonymous';
                    
                    // Wait for image to load
                    await new Promise((resolve) => {
                        if (photoElement.complete) {
                            resolve();
                        } else {
                            photoElement.onload = resolve;
                            photoElement.onerror = resolve;
                            setTimeout(resolve, 3000);
                        }
                    });
                }

                // Wait for fonts to load
                if (document.fonts && document.fonts.ready) {
                    await document.fonts.ready;
                }

                // Additional wait for layout to settle
                await new Promise(resolve => setTimeout(resolve, 500));

                // Generate canvas with html2canvas - optimized for A4
                const canvas = await html2canvas(clonedElement, {
                    scale: 3,
                    useCORS: true,
                    allowTaint: true,
                    backgroundColor: '#ffffff',
                    logging: false,
                    letterRendering: true,
                    width: Math.round(210 * 3.78), // A4 width in pixels at 96 DPI
                    height: Math.round(297 * 3.78), // A4 height in pixels at 96 DPI
                    windowWidth: Math.round(210 * 3.78),
                    windowHeight: Math.round(297 * 3.78),
                    x: 0,
                    y: 0,
                    scrollX: 0,
                    scrollY: 0
                });

                // Remove the cloned element
                document.body.removeChild(clonedElement);

                // Create PDF with exact A4 dimensions
                const { jsPDF } = window.jspdf;
                const pdf = new jsPDF({
                    orientation: 'portrait',
                    unit: 'mm',
                    format: 'a4',
                    compress: true
                });

                const imgData = canvas.toDataURL('image/jpeg', 0.98);
                
                // Add image to fill entire A4 page with no margins
                pdf.addImage(imgData, 'JPEG', 0, 0, 210, 297, '', 'FAST');
                pdf.save(`${name.replace(/\s+/g, '_')}_CV.pdf`);
                
                downloadBtn.textContent = originalText;
                downloadBtn.disabled = false;
                
                // Add CV to user history if logged in
                if (currentUser) {
                    const user = userDatabase[currentUser.email];
                    if (!user.cvHistory) user.cvHistory = [];
                    user.cvHistory.push({
                        id: 'cv_' + Date.now(),
                        name: name + ' CV',
                        template: currentTemplate,
                        createdAt: Date.now()
                    });
                    localStorage.setItem('cvcraft_users', JSON.stringify(userDatabase));
                }
                
                showNotification('CV downloaded successfully!', 'success');
                
            } catch (error) {
                console.error('PDF generation failed:', error);
                downloadBtn.textContent = originalText;
                downloadBtn.disabled = false;
                alert('PDF generation failed. Please try again or contact support.');
            }
        }

        function optimizeForPerfectFit(element) {
            // Set up perfect A4 dimensions with proper internal spacing
            element.style.padding = '20px';
            element.style.margin = '0';
            element.style.border = 'none';
            element.style.borderRadius = '0';
            element.style.boxShadow = 'none';
            element.style.width = '100%';
            element.style.height = 'auto';
            element.style.minHeight = '100%';
            element.style.boxSizing = 'border-box';
            element.style.lineHeight = '1.4';
            element.style.fontSize = '11pt';
            element.style.fontFamily = 'Arial, sans-serif';
            element.style.color = '#333';
            element.style.backgroundColor = '#ffffff';
            
            // Optimize different template layouts for perfect fit
            const templateClass = element.className;
            
            if (templateClass.includes('template-classic')) {
                optimizeClassicForPDF(element);
            } else if (templateClass.includes('template-modern')) {
                optimizeModernForPDF(element);
            } else if (templateClass.includes('template-creative')) {
                optimizeCreativeForPDF(element);
            } else if (templateClass.includes('template-professional')) {
                optimizeProfessionalForPDF(element);
            } else if (templateClass.includes('template-premium')) {
                optimizePremiumForPDF(element);
            } else if (templateClass.includes('template-executive')) {
                optimizeExecutiveForPDF(element);
            } else if (templateClass.includes('template-traditional')) {
                optimizeTraditionalForPDF(element);
            } else if (templateClass.includes('template-ats')) {
                optimizeATSForPDF(element);
            } else if (templateClass.includes('template-linkedin')) {
                optimizeLinkedInForPDF(element);
            }
            
            // Universal optimizations for all templates
            const sections = element.querySelectorAll('.cv-section');
            sections.forEach((section, index) => {
                section.style.marginBottom = index === sections.length - 1 ? '0' : '15px';
                section.style.pageBreakInside = 'avoid';
                section.style.breakInside = 'avoid';
            });
            
            const sectionTitles = element.querySelectorAll('.cv-section-title');
            sectionTitles.forEach(title => {
                title.style.fontSize = '13pt';
                title.style.fontWeight = 'bold';
                title.style.marginBottom = '8px';
                title.style.marginTop = '0';
                title.style.pageBreakAfter = 'avoid';
                title.style.lineHeight = '1.2';
            });
            
            const sectionContent = element.querySelectorAll('.cv-section-content');
            sectionContent.forEach(content => {
                content.style.fontSize = '11pt';
                content.style.lineHeight = '1.4';
                content.style.margin = '0';
            });
            
            // Optimize names and contact info
            const names = element.querySelectorAll('.cv-name');
            names.forEach(name => {
                name.style.fontSize = '20pt';
                name.style.fontWeight = 'bold';
                name.style.marginBottom = '8px';
                name.style.lineHeight = '1.1';
            });
            
            const contacts = element.querySelectorAll('.cv-contact');
            contacts.forEach(contact => {
                contact.style.fontSize = '10pt';
                contact.style.lineHeight = '1.3';
                contact.style.marginBottom = '10px';
            });
            
            const headlines = element.querySelectorAll('#previewHeadline');
            headlines.forEach(headline => {
                headline.style.fontSize = '11pt';
                headline.style.marginBottom = '8px';
                headline.style.lineHeight = '1.2';
                headline.style.fontStyle = 'italic';
            });
        }

        function optimizeForSinglePage(element) {
            // Legacy function - redirect to new optimizeForPerfectFit
            optimizeForPerfectFit(element);
        }

        // PDF-optimized template functions
        function optimizeClassicForPDF(element) {
            element.style.padding = '20px';
            element.style.fontFamily = 'Times New Roman, serif';
            
            const header = element.querySelector('.cv-header');
            if (header) {
                header.style.textAlign = 'center';
                header.style.padding = '0 0 15px 0';
                header.style.marginBottom = '20px';
                header.style.borderBottom = '2px solid #333';
            }
            
            const photo = element.querySelector('.cv-photo');
            if (photo) {
                photo.style.width = '100px';
                photo.style.height = '100px';
                photo.style.borderRadius = '50%';
                photo.style.border = '3px solid #2c3e50';
                photo.style.margin = '0 auto 15px';
                photo.style.display = 'block';
            }
        }

        function optimizeModernForPDF(element) {
            element.style.padding = '0';
            element.style.display = 'grid';
            element.style.gridTemplateColumns = '1fr 2fr';
            element.style.gap = '0';
            element.style.minHeight = '297mm';
            element.style.height = '297mm';
            element.style.maxHeight = '297mm';
            element.style.overflow = 'hidden';
            element.style.fontFamily = 'Arial, sans-serif';
            
            const sidebar = element.querySelector('.cv-sidebar');
            const main = element.querySelector('.cv-main');
            
            if (sidebar) {
                sidebar.style.background = '#2c3e50';
                sidebar.style.color = 'white';
                sidebar.style.padding = '20px 15px';
                sidebar.style.margin = '0';
                sidebar.style.height = '297mm';
                sidebar.style.maxHeight = '297mm';
                sidebar.style.overflow = 'hidden';
                sidebar.style.boxSizing = 'border-box';
                sidebar.style.display = 'flex';
                sidebar.style.flexDirection = 'column';
            }
            
            if (main) {
                main.style.padding = '20px';
                main.style.margin = '0';
                main.style.background = 'white';
                main.style.height = '297mm';
                main.style.maxHeight = '297mm';
                main.style.overflow = 'hidden';
                main.style.boxSizing = 'border-box';
                main.style.display = 'flex';
                main.style.flexDirection = 'column';
            }
            
            // Optimize sections in both sidebar and main
            const allSections = element.querySelectorAll('.cv-section');
            allSections.forEach((section, index) => {
                section.style.marginBottom = index === allSections.length - 1 ? '0' : '12px';
                section.style.flex = 'none';
            });
            
            const photo = element.querySelector('.cv-photo');
            if (photo) {
                photo.style.width = '80px';
                photo.style.height = '80px';
                photo.style.borderRadius = '50%';
                photo.style.border = '3px solid #3498db';
                photo.style.margin = '0 auto 15px';
                photo.style.display = 'block';
                photo.style.flexShrink = '0';
            }
        }

        function optimizeCreativeForPDF(element) {
            element.style.padding = '0';
            element.style.background = 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)';
            element.style.color = 'white';
            element.style.minHeight = '100%';
            element.style.fontFamily = 'Helvetica, sans-serif';
            
            const content = element.querySelector('.cv-content');
            if (content) {
                content.style.padding = '20px';
                content.style.margin = '0';
                content.style.minHeight = '100%';
                content.style.boxSizing = 'border-box';
            }
            
            const header = element.querySelector('.cv-header');
            if (header) {
                header.style.textAlign = 'center';
                header.style.marginBottom = '25px';
                header.style.padding = '0';
            }
            
            const sections = element.querySelectorAll('.cv-section');
            sections.forEach(section => {
                section.style.background = 'rgba(255,255,255,0.1)';
                section.style.padding = '15px';
                section.style.marginBottom = '15px';
                section.style.borderRadius = '10px';
                section.style.backdropFilter = 'blur(10px)';
            });
            
            const photo = element.querySelector('.cv-photo');
            if (photo) {
                photo.style.width = '110px';
                photo.style.height = '110px';
                photo.style.borderRadius = '50%';
                photo.style.border = '4px solid rgba(255,255,255,0.8)';
                photo.style.margin = '0 auto 15px';
                photo.style.display = 'block';
                photo.style.boxShadow = '0 8px 25px rgba(0,0,0,0.3)';
            }
        }

        function optimizeProfessionalForPDF(element) {
            element.style.padding = '0';
            element.style.background = '#f8f9fa';
            element.style.borderLeft = '8px solid #2c3e50';
            element.style.fontFamily = 'Georgia, serif';
            element.style.minHeight = '297mm';
            element.style.height = 'auto';
            element.style.overflow = 'visible';
            element.style.display = 'flex';
            element.style.flexDirection = 'column';
            
            const header = element.querySelector('.cv-header');
            if (header) {
                header.style.background = '#2c3e50';
                header.style.color = 'white';
                header.style.padding = '20px';
                header.style.margin = '0';
                header.style.display = 'flex';
                header.style.alignItems = 'center';
                header.style.gap = '20px';
                header.style.flexShrink = '0';
            }
            
            const body = element.querySelector('.cv-body');
            if (body) {
                body.style.padding = '20px';
                body.style.margin = '0';
                body.style.flex = '1';
                body.style.display = 'flex';
                body.style.flexDirection = 'column';
                body.style.justifyContent = 'flex-start';
            }
            
            const sections = element.querySelectorAll('.cv-section');
            sections.forEach((section, index) => {
                section.style.background = 'white';
                section.style.padding = '15px';
                section.style.marginBottom = index === sections.length - 1 ? '0' : '12px';
                section.style.borderRadius = '8px';
                section.style.boxShadow = '0 2px 10px rgba(0,0,0,0.1)';
                section.style.flex = 'none';
            });
            
            const photo = element.querySelector('.cv-photo');
            if (photo) {
                photo.style.width = '100px';
                photo.style.height = '100px';
                photo.style.borderRadius = '10px';
                photo.style.border = '4px solid white';
                photo.style.flexShrink = '0';
            }
            
            const headerText = element.querySelector('.cv-header-text');
            if (headerText) {
                headerText.style.flex = '1';
            }
        }

        function optimizePremiumForPDF(element) {
            element.style.padding = '0';
            element.style.background = 'linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)';
            element.style.color = '#2c3e50';
            element.style.fontFamily = 'Georgia, serif';
            element.style.minHeight = '297mm';
            element.style.height = 'auto';
            element.style.overflow = 'visible';
            element.style.display = 'flex';
            element.style.flexDirection = 'column';
            
            const header = element.querySelector('.cv-header');
            if (header) {
                header.style.background = 'linear-gradient(135deg, #2c3e50, #34495e)';
                header.style.color = 'white';
                header.style.padding = '25px 20px';
                header.style.margin = '0';
                header.style.marginBottom = '15px';
                header.style.textAlign = 'center';
                header.style.clipPath = 'none';
                header.style.flexShrink = '0';
            }
            
            const body = element.querySelector('.cv-body');
            if (body) {
                body.style.padding = '0 20px 20px';
                body.style.margin = '0';
                body.style.flex = '1';
                body.style.display = 'flex';
                body.style.flexDirection = 'column';
                body.style.justifyContent = 'flex-start';
            }
            
            const sections = element.querySelectorAll('.cv-section');
            sections.forEach((section, index) => {
                section.style.background = 'white';
                section.style.padding = '15px';
                section.style.marginBottom = index === sections.length - 1 ? '0' : '12px';
                section.style.borderRadius = '10px';
                section.style.boxShadow = '0 4px 15px rgba(0,0,0,0.1)';
                section.style.borderLeft = '3px solid #3498db';
                section.style.flex = 'none';
            });
            
            const photo = element.querySelector('.cv-photo');
            if (photo) {
                photo.style.width = '100px';
                photo.style.height = '100px';
                photo.style.borderRadius = '15px';
                photo.style.border = '4px solid white';
                photo.style.margin = '0 auto 20px';
                photo.style.display = 'block';
                photo.style.boxShadow = '0 15px 35px rgba(0,0,0,0.3)';
            }
        }

        function optimizeExecutiveForPDF(element) {
            element.style.padding = '0';
            element.style.background = '#f8f9fa';
            element.style.border = '1px solid #e9ecef';
            element.style.fontFamily = 'Georgia, serif';
            element.style.minHeight = '297mm';
            element.style.height = 'auto';
            element.style.overflow = 'visible';
            element.style.display = 'flex';
            element.style.flexDirection = 'column';
            
            const header = element.querySelector('.cv-header');
            if (header) {
                header.style.background = 'linear-gradient(135deg, #1a1a2e, #16213e)';
                header.style.color = 'white';
                header.style.padding = '25px 20px';
                header.style.margin = '0';
                header.style.textAlign = 'center';
                header.style.position = 'relative';
                header.style.flexShrink = '0';
            }
            
            const body = element.querySelector('.cv-body');
            if (body) {
                body.style.padding = '30px 20px 20px';
                body.style.margin = '0';
                body.style.flex = '1';
                body.style.display = 'flex';
                body.style.flexDirection = 'column';
                body.style.justifyContent = 'flex-start';
            }
            
            const sections = element.querySelectorAll('.cv-section');
            sections.forEach((section, index) => {
                section.style.background = 'white';
                section.style.padding = '15px';
                section.style.marginBottom = index === sections.length - 1 ? '0' : '12px';
                section.style.borderRadius = '10px';
                section.style.boxShadow = '0 3px 15px rgba(0,0,0,0.1)';
                section.style.borderLeft = '3px solid #667eea';
                section.style.flex = 'none';
            });
            
            const photo = element.querySelector('.cv-photo');
            if (photo) {
                photo.style.width = '120px';
                photo.style.height = '120px';
                photo.style.borderRadius = '50%';
                photo.style.border = '5px solid rgba(255,255,255,0.8)';
                photo.style.margin = '0 auto 20px';
                photo.style.display = 'block';
                photo.style.boxShadow = '0 10px 30px rgba(0,0,0,0.3)';
            }
        }

        function optimizeTraditionalForPDF(element) {
            element.style.padding = '20px';
            element.style.background = 'white';
            element.style.color = '#2c3e50';
            element.style.border = '1px solid #bdc3c7';
            element.style.fontFamily = 'Georgia, serif';
            element.style.lineHeight = '1.6';
            element.style.minHeight = '100%';
            element.style.boxSizing = 'border-box';
            
            const header = element.querySelector('.cv-header');
            if (header) {
                header.style.textAlign = 'center';
                header.style.padding = '0 0 20px 0';
                header.style.marginBottom = '25px';
                header.style.borderBottom = '3px double #2c3e50';
            }
            
            const photo = element.querySelector('.cv-photo');
            if (photo) {
                photo.style.width = '80px';
                photo.style.height = '80px';
                photo.style.borderRadius = '5px';
                photo.style.border = '2px solid #2c3e50';
                photo.style.margin = '0 auto 15px';
                photo.style.display = 'block';
            }
        }

        function optimizeATSForPDF(element) {
            element.style.padding = '30px';
            element.style.background = 'white';
            element.style.color = '#000';
            element.style.fontFamily = 'Arial, sans-serif';
            element.style.fontSize = '11pt';
            element.style.lineHeight = '1.4';
            element.style.minHeight = '100%';
            element.style.boxSizing = 'border-box';
            
            const header = element.querySelector('.cv-header');
            if (header) {
                header.style.textAlign = 'left';
                header.style.padding = '0 0 12px 0';
                header.style.marginBottom = '18px';
                header.style.borderBottom = '2px solid #000';
            }
            
            const sections = element.querySelectorAll('.cv-section');
            sections.forEach(section => {
                section.style.marginBottom = '18px';
                section.style.padding = '0';
            });
            
            const sectionTitles = element.querySelectorAll('.cv-section-title');
            sectionTitles.forEach(title => {
                title.style.fontSize = '12pt';
                title.style.fontWeight = 'bold';
                title.style.textTransform = 'uppercase';
                title.style.borderBottom = '1px solid #000';
                title.style.paddingBottom = '3px';
                title.style.marginBottom = '8px';
            });
            
            // Hide photo for ATS optimization
            const photo = element.querySelector('.cv-photo');
            if (photo) {
                photo.style.display = 'none';
            }
        }

        function optimizeLinkedInForPDF(element) {
            element.style.padding = '0';
            element.style.background = 'white';
            element.style.color = '#000';
            element.style.fontFamily = 'Inter, sans-serif';
            element.style.lineHeight = '1.5';
            element.style.minHeight = '100%';
            
            const header = element.querySelector('.cv-header');
            if (header) {
                header.style.background = '#0077b5';
                header.style.color = 'white';
                header.style.padding = '20px';
                header.style.margin = '0';
            }
            
            const body = element.querySelector('.cv-body');
            if (body) {
                body.style.padding = '20px';
                body.style.margin = '0';
            }
            
            const headerContent = element.querySelector('.cv-header-content');
            if (headerContent) {
                headerContent.style.display = 'flex';
                headerContent.style.alignItems = 'center';
                headerContent.style.gap = '20px';
            }
            
            const sections = element.querySelectorAll('.cv-section');
            sections.forEach((section, index) => {
                section.style.marginBottom = '25px';
                section.style.paddingBottom = '20px';
                if (index < sections.length - 1) {
                    section.style.borderBottom = '1px solid #e0e0e0';
                }
            });
            
            const photo = element.querySelector('.cv-photo');
            if (photo) {
                photo.style.width = '100px';
                photo.style.height = '100px';
                photo.style.borderRadius = '50%';
                photo.style.border = '4px solid white';
                photo.style.flexShrink = '0';
            }
            
            const headerText = element.querySelector('.cv-header-text');
            if (headerText) {
                headerText.style.flex = '1';
            }
        }

        // Legacy template optimization functions (for backward compatibility)
        function optimizeClassicTemplate(element) { optimizeClassicForPDF(element); }
        function optimizeModernTemplate(element) { optimizeModernForPDF(element); }
        function optimizeCreativeTemplate(element) { optimizeCreativeForPDF(element); }
        function optimizeProfessionalTemplate(element) { optimizeProfessionalForPDF(element); }
        function optimizePremiumTemplate(element) { optimizePremiumForPDF(element); }
        function optimizeExecutiveTemplate(element) { optimizeExecutiveForPDF(element); }
        function optimizeTraditionalTemplate(element) { optimizeTraditionalForPDF(element); }
        function optimizeATSTemplate(element) { optimizeATSForPDF(element); }
        function optimizeLinkedInTemplate(element) { optimizeLinkedInForPDF(element); }

        // Social Login Functions
        function loginWithGoogle() {
            // Simulate Google OAuth flow
            showNotification('Google login integration coming soon! Please use email login for now.', 'info');
            // In a real implementation, this would redirect to Google OAuth
            // window.location.href = 'https://accounts.google.com/oauth/authorize?...';
        }

        function loginWithFacebook() {
            // Simulate Facebook OAuth flow
            showNotification('Facebook login integration coming soon! Please use email login for now.', 'info');
            // In a real implementation, this would use Facebook SDK
            // FB.login(function(response) { ... });
        }

        function signupWithGoogle() {
            // Simulate Google OAuth flow for signup
            showNotification('Google signup integration coming soon! Please use email signup for now.', 'info');
        }

        function signupWithFacebook() {
            // Simulate Facebook OAuth flow for signup
            showNotification('Facebook signup integration coming soon! Please use email signup for now.', 'info');
        }

        // Translation System
        let currentLanguage = 'en';
        
        const translations = {
            en: {
                // Navigation
                home: 'Home',
                features: 'Features',
                login: 'Login',
                signup: 'Sign Up',
                dashboard: 'Dashboard',
                profile: 'Profile',
                settings: 'Settings',
                logout: 'Logout',
                
                // Main header
                mainTitle: 'CVCraft Pro',
                mainSubtitle: 'Create stunning, professional CVs in minutes with our advanced builder',
                
                // Dashboard
                welcomeBack: 'Welcome back',
                dashboardSubtitle: 'Manage your CVs, view payment history, and create new resumes',
                myCVs: 'My CVs',
                createNewCV: 'Create New CV',
                showHistory: 'Show History',
                hideHistory: 'Hide History',
                accountStats: 'Account Stats',
                cvsCreated: 'CVs Created',
                totalSpent: 'Total Spent',
                daysActive: 'Days Active',
                templates: 'Templates',
                noActivity: 'No activity yet. Create your first CV to see history here!',
                
                // Auth Modal
                welcomeTitle: 'Welcome to CVCraft Pro',
                welcomeSubtitle: 'Create professional CVs in minutes',
                welcomeBack2: 'Welcome Back!',
                signInSubtitle: 'Sign in to access your dashboard',
                joinTitle: 'Join CVCraft Pro',
                createAccountSubtitle: 'Create your account in seconds',
                resetPasswordTitle: 'Reset Password',
                resetPasswordSubtitle: 'Enter your email to receive reset instructions',
                emailAddress: 'Email Address',
                password: 'Password',
                forgotPassword: 'Forgot Password?',
                loginToAccount: 'Login to Account',
                orContinueWith: 'or continue with',
                google: 'Google',
                facebook: 'Facebook',
                fullNameAuth: 'Full Name',
                createPassword: 'Create a password (min 8 characters)',
                confirmPassword: 'Confirm Password',
                agreeTerms: 'I agree to the Terms of Service and Privacy Policy',
                createAccount: 'Create Account',
                orSignUpWith: 'or sign up with',
                sendResetLink: 'Send Reset Link',
                backToLogin: 'Back to Login',
                resetLinkSent: 'We\'ll send you a link to reset your password.',
                
                // Features Page
                powerfulFeatures: 'Powerful Features',
                featuresSubtitle: 'Everything you need to create professional CVs that get you hired',
                professionalTemplates: '9 Professional Templates',
                templatesDesc: 'Choose from 9 expertly designed templates including ATS-optimized formats. Each template is crafted by professional designers to help you stand out and get past applicant tracking systems.',
                classicTemplate: 'Classic - Traditional and timeless',
                modernTemplate: 'Modern - Two-column layout',
                creativeTemplate: 'Creative - Colorful and unique',
                professionalTemplate: 'Professional - Corporate style',
                premiumTemplate: 'Premium - Sophisticated and elegant',
                executiveTemplate: 'Executive - Premium luxury design',
                traditionalTemplate: 'Traditional - Classic and formal',
                linkedinTemplate: 'LinkedIn - Professional social style',
                atsTemplate: 'ATS Optimized - Beats tracking systems',
                realTimeLivePreview: 'Real-Time Live Preview',
                livePreviewDesc: 'See your CV update instantly as you type. No waiting, no guessing - what you see is exactly what you get in your final PDF.',
                instantUpdates: 'Instant updates as you type',
                switchTemplates: 'Switch templates in real-time',
                photoPreview: 'Photo preview integration',
                perfectFormatting: 'Perfect formatting guaranteed',
                secureUserAccounts: 'Secure User Accounts',
                userAccountsDesc: 'Create your personal account to track your CVs, payment history, and access your documents anytime, anywhere.',
                secureLogin: 'Secure login & registration',
                passwordReset: 'Password reset functionality',
                sessionManagement: '7-day session management',
                personalDashboard: 'Personal dashboard',
                securePaymentProcessing: 'Secure Payment Processing',
                paymentDesc: 'Simple, transparent pricing at just $1 per CV. Secure payment processing with complete transaction history tracking.',
                onePrice: '$1.00 per CV - No hidden fees',
                encryptedPayment: 'Encrypted payment processing',
                paymentHistory: 'Complete payment history',
                instantReceipt: 'Instant receipt generation',
                highQualityPDF: 'High-Quality PDF Export',
                pdfDesc: 'Generate professional PDF files that maintain perfect formatting, high-resolution images, and are ready for printing or digital sharing.',
                highResolution: 'High-resolution PDF output',
                formatPreservation: 'Perfect formatting preservation',
                printReady: 'Print-ready quality',
                instantDownload: 'Instant download',
                personalDashboard2: 'Personal Dashboard',
                dashboardDesc: 'Access your personal dashboard to manage all your CVs, view payment history, and track your account statistics in one place.',
                cvManagement: 'CV history & management',
                transactionHistory: 'Payment transaction history',
                accountStatistics: 'Account statistics',
                quickRedownload: 'Quick CV re-download',
                additionalFeatures: 'Additional Features',
                mobileResponsive: 'Mobile Responsive',
                mobileDesc: 'Works perfectly on all devices - desktop, tablet, and mobile',
                darkMode: 'Dark Mode',
                darkModeDesc: 'Toggle between light and dark themes for comfortable viewing',
                aiAssistant: 'AI Assistant',
                aiDesc: 'Built-in chatbot to help with CV writing tips and questions',
                photoUpload: 'Photo Upload',
                photoDesc: 'Add professional photos with automatic resizing and positioning',
                privacySecurityFirst: 'Privacy & Security First',
                dataEncryption: 'Data Encryption',
                encryptionDesc: 'All data is encrypted using industry-standard protocols',
                autoDelete: 'Auto-Delete',
                autoDeleteDesc: 'Uploaded photos and data are automatically deleted after PDF generation',
                noDataSharing: 'No Data Sharing',
                noSharingDesc: 'Your personal information is never shared with third parties',
                
                // Profile Page
                personalInformation: 'Personal Information',
                firstName: 'First Name',
                lastName: 'Last Name',
                saveChanges: 'Save Changes',
                cancel: 'Cancel',
                memberSince: 'Member since',
                lastLogin: 'Last Login',
                today: 'Today',
                
                // Settings Page
                settingsTitle: 'Settings',
                settingsSubtitle: 'Customize your CVCraft Pro experience',
                generalSettings: 'General Settings',
                darkModeSettings: 'Dark Mode',
                darkModeSettingsDesc: 'Switch between light and dark themes',
                language: 'Language',
                languageDesc: 'Choose your preferred language',
                changePassword: 'Change Password',
                currentPassword: 'Current Password',
                newPassword: 'New Password',
                confirmNewPassword: 'Confirm New Password',
                updatePassword: 'Update Password',
                accountManagement: 'Account Management',
                clearAllData: 'Clear All Data',
                clearDataDesc: 'Remove all your CVs and personal information',
                clearData: 'Clear Data',
                deleteAccount: 'Delete Account',
                deleteAccountDesc: 'Permanently delete your account and all data',
                saveAllSettings: 'Save All Settings',
                
                // Additional Settings translations
                enterCurrentPassword: 'Enter your current password',
                enterNewPassword: 'Enter new password (min 8 characters)',
                confirmNewPasswordPlaceholder: 'Confirm your new password',
                
                // Form labels
                fullName: 'Full Name',
                contactInfo: 'Contact Information',
                professionalHeadline: 'Professional Headline',
                profilePhoto: 'Profile Photo',
                education: 'Education',
                skills: 'Skills',
                workExperience: 'Work Experience',
                languagesOptional: 'Languages (Optional)',
                certificatesAwards: 'Certificates & Awards (Optional)',
                hobbiesInterests: 'Hobbies & Interests (Optional)',
                
                // Placeholders
                fullNamePlaceholder: 'Enter your full name',
                contactPlaceholder: 'Email: your.email@example.com\nPhone: +1 (555) 123-4567\nLinkedIn: linkedin.com/in/yourname\nWebsite: yourwebsite.com',
                headlinePlaceholder: 'Senior Software Developer | Full-Stack Engineer | Tech Enthusiast',
                educationPlaceholder: 'Bachelor of Science in Computer Science\nUniversity of Technology, 2020-2024',
                skillsPlaceholder: 'JavaScript, Python, React, Node.js\nProject Management, Team Leadership',
                experiencePlaceholder: 'Software Developer | Tech Company (2022-Present)\n• Developed web applications using React and Node.js\n• Collaborated with cross-functional teams',
                languagesPlaceholder: 'English - Native\nSpanish - Fluent\nFrench - Intermediate',
                certificatesPlaceholder: 'AWS Certified Solutions Architect (2023)\nGoogle Analytics Certified (2022)\nBest Employee Award - Tech Corp (2021)',
                hobbiesPlaceholder: 'Photography, Hiking, Reading\nVolunteer work at local animal shelter\nPlaying guitar and composing music',
                
                // Template buttons
                chooseTemplate: 'Choose Template:',
                
                // Payment section
                paymentTitle: 'Generate Professional CV - $1.00',
                paymentDesc: 'One-time payment • Instant download • Professional quality',
                cardNumber: 'Card Number',
                expiry: 'Expiry',
                cvv: 'CVV',
                payButton: '💳 Pay $1.00 & Download CV',
                paymentSuccess: '✅ Payment Successful!',
                downloadButton: '📄 Download Your CV Now',
                
                // Preview section
                livePreview: 'Live Preview',
                overflowWarning: 'Content Overflow Warning!',
                
                // CV Preview default text
                yourName: 'Your Name',
                professionalHeadlineDefault: 'Professional Headline',
                contactDefault: 'Email: your.email@example.com\nPhone: +1 (555) 123-4567\nLinkedIn: linkedin.com/in/yourname',
                educationDefault: 'Your education details will appear here',
                skillsDefault: 'Your skills will appear here',
                experienceDefault: 'Your work experience will appear here',
                
                // Footer information
                importantInformation: 'Important Information',
                privacyDataProtection: '🔒 Privacy & Data Protection',
                privacyText: '• Your personal information is processed securely and never shared with third parties\n• All uploaded photos and data are automatically deleted after PDF generation\n• We use industry-standard encryption for all payment transactions',
                paymentPolicy: '💳 Payment Policy',
                paymentPolicyText: '• One-time payment of $1.00 allows generation of ONE CV only\n• Please ensure all information is correct before payment\n• No refunds after successful PDF generation\n• Payment is processed securely through encrypted channels',
                importantNotice: '⚠️ Important Notice',
                noticeText: 'Please double-check all your information before making payment. Each $1.00 payment allows you to generate only ONE CV. Make sure your details are complete and accurate as you cannot generate another CV with the same payment.',
                needHelp: '📧 Need Help?',
                helpText: 'For any issues, questions, or technical support:',
                responseTime: 'We typically respond within 24 hours',
                
                // Additional feature translations
                realTimeLivePreview: 'Real-Time Live Preview',
                livePreviewDesc: 'See your CV update instantly as you type. No waiting, no guessing - what you see is exactly what you get in your final PDF.',
                instantUpdates: 'Instant updates as you type',
                switchTemplates: 'Switch templates in real-time',
                photoPreview: 'Photo preview integration',
                perfectFormatting: 'Perfect formatting guaranteed',
                secureUserAccounts: 'Secure User Accounts',
                userAccountsDesc: 'Create your personal account to track your CVs, payment history, and access your documents anytime, anywhere.',
                secureLogin: 'Secure login & registration',
                passwordReset: 'Password reset functionality',
                sessionManagement: '7-day session management',
                personalDashboard: 'Personal dashboard',
                securePaymentProcessing: 'Secure Payment Processing',
                paymentDesc: 'Simple, transparent pricing at just $1 per CV. Secure payment processing with complete transaction history tracking.',
                onePrice: '$1.00 per CV - No hidden fees',
                encryptedPayment: 'Encrypted payment processing',
                paymentHistory: 'Complete payment history',
                instantReceipt: 'Instant receipt generation',
                highQualityPDF: 'High-Quality PDF Export',
                pdfDesc: 'Generate professional PDF files that maintain perfect formatting, high-resolution images, and are ready for printing or digital sharing.',
                highResolution: 'High-resolution PDF output',
                formatPreservation: 'Perfect formatting preservation',
                printReady: 'Print-ready quality',
                instantDownload: 'Instant download',
                personalDashboard2: 'Personal Dashboard',
                dashboardDesc: 'Access your personal dashboard to manage all your CVs, view payment history, and track your account statistics in one place.',
                cvManagement: 'CV history & management',
                transactionHistory: 'Payment transaction history',
                accountStatistics: 'Account statistics',
                quickRedownload: 'Quick CV re-download',
                additionalFeatures: 'Additional Features',
                mobileResponsive: 'Mobile Responsive',
                mobileDesc: 'Works perfectly on all devices - desktop, tablet, and mobile',
                darkMode: 'Dark Mode',
                darkModeDesc: 'Toggle between light and dark themes for comfortable viewing',
                aiAssistant: 'AI Assistant',
                aiDesc: 'Built-in chatbot to help with CV writing tips and questions',
                photoUpload: 'Photo Upload',
                photoDesc: 'Add professional photos with automatic resizing and positioning',
                privacySecurityFirst: 'Privacy & Security First',
                dataEncryption: 'Data Encryption',
                encryptionDesc: 'All data is encrypted using industry-standard protocols',
                autoDelete: 'Auto-Delete',
                autoDeleteDesc: 'Uploaded photos and data are automatically deleted after PDF generation',
                noDataSharing: 'No Data Sharing',
                noSharingDesc: 'Your personal information is never shared with third parties',
                
                // Chatbot
                cvAssistant: 'CV Assistant',
                chatPlaceholder: 'Type your message...',
                
                // Notifications
                loginSuccessful: 'Welcome back! Login successful.',
                accountCreated: 'Account created successfully! Welcome to CVCraft Pro.',
                logoutSuccessful: 'Logged out successfully!',
                profileUpdated: 'Profile updated successfully!',
                passwordUpdated: 'Password updated successfully!',
                settingsSaved: 'Settings saved successfully!',
                paymentSuccessful: 'Payment successful! You can now download your CV.',
                cvDownloaded: 'CV downloaded successfully!',
                historyCleared: 'History cleared successfully!',
                languageChanged: 'Language changed to English'
            },
            es: {
                // Navigation
                home: 'Inicio',
                features: 'Características',
                login: 'Iniciar Sesión',
                signup: 'Registrarse',
                dashboard: 'Panel de Control',
                profile: 'Perfil',
                settings: 'Configuración',
                logout: 'Cerrar Sesión',
                
                // Main header
                mainTitle: 'CVCraft Pro',
                mainSubtitle: 'Crea CVs profesionales y sorprendentes en minutos con nuestro constructor avanzado',
                
                // Dashboard
                welcomeBack: 'Bienvenido de vuelta',
                dashboardSubtitle: 'Gestiona tus CVs, ve el historial de pagos y crea nuevos currículums',
                myCVs: 'Mis CVs',
                createNewCV: 'Crear Nuevo CV',
                showHistory: 'Mostrar Historial',
                hideHistory: 'Ocultar Historial',
                accountStats: 'Estadísticas de Cuenta',
                cvsCreated: 'CVs Creados',
                totalSpent: 'Total Gastado',
                daysActive: 'Días Activo',
                templates: 'Plantillas',
                noActivity: '¡Aún no hay actividad. Crea tu primer CV para ver el historial aquí!',
                
                // Auth Modal
                welcomeTitle: 'Bienvenido a CVCraft Pro',
                welcomeSubtitle: 'Crea CVs profesionales en minutos',
                welcomeBack2: '¡Bienvenido de Vuelta!',
                signInSubtitle: 'Inicia sesión para acceder a tu panel de control',
                joinTitle: 'Únete a CVCraft Pro',
                createAccountSubtitle: 'Crea tu cuenta en segundos',
                resetPasswordTitle: 'Restablecer Contraseña',
                resetPasswordSubtitle: 'Ingresa tu email para recibir instrucciones de restablecimiento',
                emailAddress: 'Dirección de Email',
                password: 'Contraseña',
                forgotPassword: '¿Olvidaste tu contraseña?',
                loginToAccount: 'Iniciar Sesión en la Cuenta',
                orContinueWith: 'o continúa con',
                google: 'Google',
                facebook: 'Facebook',
                fullNameAuth: 'Nombre Completo',
                createPassword: 'Crea una contraseña (mín 8 caracteres)',
                confirmPassword: 'Confirmar Contraseña',
                agreeTerms: 'Acepto los Términos de Servicio y la Política de Privacidad',
                createAccount: 'Crear Cuenta',
                orSignUpWith: 'o regístrate con',
                sendResetLink: 'Enviar Enlace de Restablecimiento',
                backToLogin: 'Volver al Inicio de Sesión',
                resetLinkSent: 'Te enviaremos un enlace para restablecer tu contraseña.',
                
                // Features Page
                powerfulFeatures: 'Características Poderosas',
                featuresSubtitle: 'Todo lo que necesitas para crear CVs profesionales que te consigan trabajo',
                professionalTemplates: '9 Plantillas Profesionales',
                templatesDesc: 'Elige entre 9 plantillas diseñadas por expertos, incluyendo formatos optimizados para ATS. Cada plantilla está creada por diseñadores profesionales para ayudarte a destacar y superar los sistemas de seguimiento de candidatos.',
                classicTemplate: 'Clásico - Tradicional y atemporal',
                modernTemplate: 'Moderno - Diseño de dos columnas',
                creativeTemplate: 'Creativo - Colorido y único',
                professionalTemplate: 'Profesional - Estilo corporativo',
                premiumTemplate: 'Premium - Sofisticado y elegante',
                executiveTemplate: 'Ejecutivo - Diseño de lujo premium',
                traditionalTemplate: 'Tradicional - Clásico y formal',
                linkedinTemplate: 'LinkedIn - Estilo social profesional',
                atsTemplate: 'Optimizado ATS - Supera sistemas de seguimiento',
                realTimeLivePreview: 'Vista Previa en Tiempo Real',
                livePreviewDesc: 'Ve tu CV actualizarse instantáneamente mientras escribes. Sin esperas, sin conjeturas: lo que ves es exactamente lo que obtienes en tu PDF final.',
                instantUpdates: 'Actualizaciones instantáneas mientras escribes',
                switchTemplates: 'Cambiar plantillas en tiempo real',
                photoPreview: 'Integración de vista previa de foto',
                perfectFormatting: 'Formato perfecto garantizado',
                secureUserAccounts: 'Cuentas de Usuario Seguras',
                userAccountsDesc: 'Crea tu cuenta personal para rastrear tus CVs, historial de pagos y acceder a tus documentos en cualquier momento y lugar.',
                secureLogin: 'Inicio de sesión y registro seguros',
                passwordReset: 'Funcionalidad de restablecimiento de contraseña',
                sessionManagement: 'Gestión de sesiones de 7 días',
                personalDashboard: 'Panel de control personal',
                securePaymentProcessing: 'Procesamiento de Pagos Seguro',
                paymentDesc: 'Precios simples y transparentes a solo $1 por CV. Procesamiento de pagos seguro con seguimiento completo del historial de transacciones.',
                onePrice: '$1.00 por CV - Sin tarifas ocultas',
                encryptedPayment: 'Procesamiento de pagos encriptado',
                paymentHistory: 'Historial completo de pagos',
                instantReceipt: 'Generación instantánea de recibos',
                highQualityPDF: 'Exportación PDF de Alta Calidad',
                pdfDesc: 'Genera archivos PDF profesionales que mantienen el formato perfecto, imágenes de alta resolución y están listos para imprimir o compartir digitalmente.',
                highResolution: 'Salida PDF de alta resolución',
                formatPreservation: 'Preservación perfecta del formato',
                printReady: 'Calidad lista para imprimir',
                instantDownload: 'Descarga instantánea',
                personalDashboard2: 'Panel de Control Personal',
                dashboardDesc: 'Accede a tu panel de control personal para gestionar todos tus CVs, ver el historial de pagos y rastrear las estadísticas de tu cuenta en un solo lugar.',
                cvManagement: 'Historial y gestión de CVs',
                transactionHistory: 'Historial de transacciones de pago',
                accountStatistics: 'Estadísticas de cuenta',
                quickRedownload: 'Re-descarga rápida de CV',
                additionalFeatures: 'Características Adicionales',
                mobileResponsive: 'Responsivo Móvil',
                mobileDesc: 'Funciona perfectamente en todos los dispositivos: escritorio, tablet y móvil',
                darkMode: 'Modo Oscuro',
                darkModeDesc: 'Alterna entre temas claro y oscuro para una visualización cómoda',
                aiAssistant: 'Asistente IA',
                aiDesc: 'Chatbot integrado para ayudar con consejos de escritura de CV y preguntas',
                photoUpload: 'Subida de Fotos',
                photoDesc: 'Añade fotos profesionales con redimensionamiento automático y posicionamiento',
                privacySecurityFirst: 'Privacidad y Seguridad Primero',
                dataEncryption: 'Encriptación de Datos',
                encryptionDesc: 'Todos los datos están encriptados usando protocolos estándar de la industria',
                autoDelete: 'Auto-Eliminación',
                autoDeleteDesc: 'Las fotos subidas y los datos se eliminan automáticamente después de la generación del PDF',
                noDataSharing: 'Sin Compartir Datos',
                noSharingDesc: 'Tu información personal nunca se comparte con terceros',
                
                // Profile Page
                personalInformation: 'Información Personal',
                firstName: 'Nombre',
                lastName: 'Apellido',
                saveChanges: 'Guardar Cambios',
                cancel: 'Cancelar',
                memberSince: 'Miembro desde',
                lastLogin: 'Último Acceso',
                today: 'Hoy',
                
                // Settings Page
                settingsTitle: 'Configuración',
                settingsSubtitle: 'Personaliza tu experiencia con CVCraft Pro',
                generalSettings: 'Configuración General',
                darkModeSettings: 'Modo Oscuro',
                darkModeSettingsDesc: 'Cambiar entre temas claro y oscuro',
                language: 'Idioma',
                languageDesc: 'Elige tu idioma preferido',
                changePassword: 'Cambiar Contraseña',
                currentPassword: 'Contraseña Actual',
                newPassword: 'Nueva Contraseña',
                confirmNewPassword: 'Confirmar Nueva Contraseña',
                updatePassword: 'Actualizar Contraseña',
                accountManagement: 'Gestión de Cuenta',
                clearAllData: 'Limpiar Todos los Datos',
                clearDataDesc: 'Eliminar todos tus CVs e información personal',
                clearData: 'Limpiar Datos',
                deleteAccount: 'Eliminar Cuenta',
                deleteAccountDesc: 'Eliminar permanentemente tu cuenta y todos los datos',
                saveAllSettings: 'Guardar Toda la Configuración',
                
                // Additional Settings translations
                enterCurrentPassword: 'Ingresa tu contraseña actual',
                enterNewPassword: 'Ingresa nueva contraseña (mín 8 caracteres)',
                confirmNewPasswordPlaceholder: 'Confirma tu nueva contraseña',
                
                // Form labels
                fullName: 'Nombre Completo',
                contactInfo: 'Información de Contacto',
                professionalHeadline: 'Título Profesional',
                profilePhoto: 'Foto de Perfil',
                education: 'Educación',
                skills: 'Habilidades',
                workExperience: 'Experiencia Laboral',
                languagesOptional: 'Idiomas (Opcional)',
                certificatesAwards: 'Certificados y Premios (Opcional)',
                hobbiesInterests: 'Pasatiempos e Intereses (Opcional)',
                
                // Placeholders
                fullNamePlaceholder: 'Ingresa tu nombre completo',
                contactPlaceholder: 'Email: tu.email@ejemplo.com\nTeléfono: +1 (555) 123-4567\nLinkedIn: linkedin.com/in/tunombre\nSitio web: tusitio.com',
                headlinePlaceholder: 'Desarrollador de Software Senior | Ingeniero Full-Stack | Entusiasta de la Tecnología',
                educationPlaceholder: 'Licenciatura en Ciencias de la Computación\nUniversidad de Tecnología, 2020-2024',
                skillsPlaceholder: 'JavaScript, Python, React, Node.js\nGestión de Proyectos, Liderazgo de Equipos',
                experiencePlaceholder: 'Desarrollador de Software | Empresa Tecnológica (2022-Presente)\n• Desarrollé aplicaciones web usando React y Node.js\n• Colaboré con equipos multifuncionales',
                languagesPlaceholder: 'Inglés - Nativo\nEspañol - Fluido\nFrancés - Intermedio',
                certificatesPlaceholder: 'AWS Certified Solutions Architect (2023)\nGoogle Analytics Certified (2022)\nPremio Mejor Empleado - Tech Corp (2021)',
                hobbiesPlaceholder: 'Fotografía, Senderismo, Lectura\nTrabajo voluntario en refugio de animales\nTocar guitarra y componer música',
                
                // Template buttons
                chooseTemplate: 'Elegir Plantilla:',
                
                // Payment section
                paymentTitle: 'Generar CV Profesional - $1.00',
                paymentDesc: 'Pago único • Descarga instantánea • Calidad profesional',
                cardNumber: 'Número de Tarjeta',
                expiry: 'Vencimiento',
                cvv: 'CVV',
                payButton: '💳 Pagar $1.00 y Descargar CV',
                paymentSuccess: '✅ ¡Pago Exitoso!',
                downloadButton: '📄 Descargar tu CV Ahora',
                
                // Preview section
                livePreview: 'Vista Previa en Vivo',
                overflowWarning: '¡Advertencia de Desbordamiento de Contenido!',
                
                // CV Preview default text
                yourName: 'Tu Nombre',
                professionalHeadlineDefault: 'Título Profesional',
                contactDefault: 'Email: tu.email@ejemplo.com\nTeléfono: +1 (555) 123-4567\nLinkedIn: linkedin.com/in/tunombre',
                educationDefault: 'Los detalles de tu educación aparecerán aquí',
                skillsDefault: 'Tus habilidades aparecerán aquí',
                experienceDefault: 'Tu experiencia laboral aparecerá aquí',
                
                // Footer information
                importantInformation: 'Información Importante',
                privacyDataProtection: '🔒 Privacidad y Protección de Datos',
                privacyText: '• Tu información personal se procesa de forma segura y nunca se comparte con terceros\n• Todas las fotos subidas y datos se eliminan automáticamente después de la generación del PDF\n• Usamos encriptación estándar de la industria para todas las transacciones de pago',
                paymentPolicy: '💳 Política de Pagos',
                paymentPolicyText: '• Un pago único de $1.00 permite la generación de UN CV solamente\n• Por favor asegúrate de que toda la información sea correcta antes del pago\n• No hay reembolsos después de la generación exitosa del PDF\n• El pago se procesa de forma segura a través de canales encriptados',
                importantNotice: '⚠️ Aviso Importante',
                noticeText: 'Por favor verifica toda tu información antes de realizar el pago. Cada pago de $1.00 te permite generar solo UN CV. Asegúrate de que tus detalles estén completos y sean precisos ya que no puedes generar otro CV con el mismo pago.',
                needHelp: '📧 ¿Necesitas Ayuda?',
                helpText: 'Para cualquier problema, pregunta o soporte técnico:',
                responseTime: 'Típicamente respondemos dentro de 24 horas',
                
                // Additional feature translations
                realTimeLivePreview: 'Vista Previa en Tiempo Real',
                livePreviewDesc: 'Ve tu CV actualizarse instantáneamente mientras escribes. Sin esperas, sin conjeturas: lo que ves es exactamente lo que obtienes en tu PDF final.',
                instantUpdates: 'Actualizaciones instantáneas mientras escribes',
                switchTemplates: 'Cambiar plantillas en tiempo real',
                photoPreview: 'Integración de vista previa de foto',
                perfectFormatting: 'Formato perfecto garantizado',
                secureUserAccounts: 'Cuentas de Usuario Seguras',
                userAccountsDesc: 'Crea tu cuenta personal para rastrear tus CVs, historial de pagos y acceder a tus documentos en cualquier momento y lugar.',
                secureLogin: 'Inicio de sesión y registro seguros',
                passwordReset: 'Funcionalidad de restablecimiento de contraseña',
                sessionManagement: 'Gestión de sesiones de 7 días',
                personalDashboard: 'Panel de control personal',
                securePaymentProcessing: 'Procesamiento de Pagos Seguro',
                paymentDesc: 'Precios simples y transparentes a solo $1 por CV. Procesamiento de pagos seguro con seguimiento completo del historial de transacciones.',
                onePrice: '$1.00 por CV - Sin tarifas ocultas',
                encryptedPayment: 'Procesamiento de pagos encriptado',
                paymentHistory: 'Historial completo de pagos',
                instantReceipt: 'Generación instantánea de recibos',
                highQualityPDF: 'Exportación PDF de Alta Calidad',
                pdfDesc: 'Genera archivos PDF profesionales que mantienen el formato perfecto, imágenes de alta resolución y están listos para imprimir o compartir digitalmente.',
                highResolution: 'Salida PDF de alta resolución',
                formatPreservation: 'Preservación perfecta del formato',
                printReady: 'Calidad lista para imprimir',
                instantDownload: 'Descarga instantánea',
                personalDashboard2: 'Panel de Control Personal',
                dashboardDesc: 'Accede a tu panel de control personal para gestionar todos tus CVs, ver el historial de pagos y rastrear las estadísticas de tu cuenta en un solo lugar.',
                cvManagement: 'Historial y gestión de CVs',
                transactionHistory: 'Historial de transacciones de pago',
                accountStatistics: 'Estadísticas de cuenta',
                quickRedownload: 'Re-descarga rápida de CV',
                additionalFeatures: 'Características Adicionales',
                mobileResponsive: 'Responsivo Móvil',
                mobileDesc: 'Funciona perfectamente en todos los dispositivos: escritorio, tablet y móvil',
                darkMode: 'Modo Oscuro',
                darkModeDesc: 'Alterna entre temas claro y oscuro para una visualización cómoda',
                aiAssistant: 'Asistente IA',
                aiDesc: 'Chatbot integrado para ayudar con consejos de escritura de CV y preguntas',
                photoUpload: 'Subida de Fotos',
                photoDesc: 'Añade fotos profesionales con redimensionamiento automático y posicionamiento',
                privacySecurityFirst: 'Privacidad y Seguridad Primero',
                dataEncryption: 'Encriptación de Datos',
                encryptionDesc: 'Todos los datos están encriptados usando protocolos estándar de la industria',
                autoDelete: 'Auto-Eliminación',
                autoDeleteDesc: 'Las fotos subidas y los datos se eliminan automáticamente después de la generación del PDF',
                noDataSharing: 'Sin Compartir Datos',
                noSharingDesc: 'Tu información personal nunca se comparte con terceros',
                
                // Chatbot
                cvAssistant: 'Asistente de CV',
                chatPlaceholder: 'Escribe tu mensaje...',
                
                // Notifications
                loginSuccessful: '¡Bienvenido de vuelta! Inicio de sesión exitoso.',
                accountCreated: '¡Cuenta creada exitosamente! Bienvenido a CVCraft Pro.',
                logoutSuccessful: '¡Sesión cerrada exitosamente!',
                profileUpdated: '¡Perfil actualizado exitosamente!',
                passwordUpdated: '¡Contraseña actualizada exitosamente!',
                settingsSaved: '¡Configuración guardada exitosamente!',
                paymentSuccessful: '¡Pago exitoso! Ahora puedes descargar tu CV.',
                cvDownloaded: '¡CV descargado exitosamente!',
                historyCleared: '¡Historial limpiado exitosamente!',
                languageChanged: 'Idioma cambiado a Español'
            }
        };

        function changeLanguage() {
            const selectedLanguage = document.getElementById('languageSelect').value;
            currentLanguage = selectedLanguage;
            
            // Save language preference
            localStorage.setItem('cvcraft_language', selectedLanguage);
            
            // Apply translations
            applyTranslations();
            
            // Update preview with new language
            updatePreview();
            
            showNotification(
                selectedLanguage === 'es' ? 'Idioma cambiado a Español' : 'Language changed to English', 
                'success'
            );
        }

        function applyTranslations() {
            const lang = translations[currentLanguage];
            
            // Translate elements with data-translate attribute
            document.querySelectorAll('[data-translate]').forEach(element => {
                const key = element.getAttribute('data-translate');
                if (lang[key]) {
                    element.textContent = lang[key];
                }
            });
            
            // Translate placeholders
            document.querySelectorAll('[data-translate-placeholder]').forEach(element => {
                const key = element.getAttribute('data-translate-placeholder');
                if (lang[key]) {
                    element.placeholder = lang[key];
                }
            });
            
            // Update specific elements that need special handling
            updateSpecialTranslations();
        }

        function updateSpecialTranslations() {
            const lang = translations[currentLanguage];
            
            // Update template selector label
            const templateLabel = document.querySelector('.template-selector label');
            if (templateLabel && lang.chooseTemplate) {
                templateLabel.textContent = lang.chooseTemplate;
            }
            
            // Update payment section
            const paymentTitle = document.querySelector('.price-info h4');
            if (paymentTitle && lang.paymentTitle) {
                paymentTitle.textContent = '💳 ' + lang.paymentTitle;
            }
            
            const paymentDesc = document.querySelector('.price-info p');
            if (paymentDesc && lang.paymentDesc) {
                paymentDesc.textContent = lang.paymentDesc;
            }
            
            // Update card form labels
            const cardLabels = document.querySelectorAll('#paymentForm label');
            if (cardLabels.length >= 3) {
                cardLabels[0].textContent = lang.cardNumber;
                cardLabels[1].textContent = lang.expiry;
                cardLabels[2].textContent = lang.cvv;
            }
            
            // Update buttons
            const payBtn = document.getElementById('payBtn');
            if (payBtn && lang.payButton) {
                payBtn.textContent = lang.payButton;
            }
            
            const downloadBtn = document.querySelector('#paymentSuccess .download-btn');
            if (downloadBtn && lang.downloadButton) {
                downloadBtn.textContent = lang.downloadButton;
            }
            
            // Update preview section title
            const previewTitle = document.querySelector('.preview-section h3');
            if (previewTitle && lang.livePreview) {
                previewTitle.textContent = lang.livePreview;
            }
        }

        function loadLanguage() {
            const savedLanguage = localStorage.getItem('cvcraft_language') || 'en';
            currentLanguage = savedLanguage;
            
            // Set the select value
            const languageSelect = document.getElementById('languageSelect');
            if (languageSelect) {
                languageSelect.value = savedLanguage;
            }
            
            // Apply translations
            applyTranslations();
        }

        function updatePreview() {
            const lang = translations[currentLanguage];
            
            const name = inputs.fullName.value || lang.yourName;
            const contact = inputs.contact.value || lang.contactDefault;
            const headline = inputs.headline.value || lang.professionalHeadlineDefault;
            const education = inputs.education.value || lang.educationDefault;
            const skills = inputs.skills.value || lang.skillsDefault;
            const experience = inputs.experience.value || lang.experienceDefault;
            const languages = inputs.languages.value;
            const certificates = inputs.certificates.value;
            const hobbies = inputs.hobbies.value;

            // Update main content
            if (preview.name) preview.name.textContent = name;
            if (preview.contact) preview.contact.innerHTML = contact.replace(/\n/g, '<br>');
            if (preview.headline) preview.headline.textContent = headline;
            if (preview.education) preview.education.innerHTML = education.replace(/\n/g, '<br>');
            if (preview.skills) preview.skills.innerHTML = skills.replace(/\n/g, '<br>');
            if (preview.experience) preview.experience.innerHTML = experience.replace(/\n/g, '<br>');

            // Handle optional sections - show only if filled
            const languagesSection = document.getElementById('languagesSection');
            const certificatesSection = document.getElementById('certificatesSection');
            const hobbiesSection = document.getElementById('hobbiesSection');

            if (languages && languages.trim()) {
                if (preview.languages) preview.languages.innerHTML = languages.replace(/\n/g, '<br>');
                if (languagesSection) languagesSection.style.display = 'block';
            } else {
                if (languagesSection) languagesSection.style.display = 'none';
            }

            if (certificates && certificates.trim()) {
                if (preview.certificates) preview.certificates.innerHTML = certificates.replace(/\n/g, '<br>');
                if (certificatesSection) certificatesSection.style.display = 'block';
            } else {
                if (certificatesSection) certificatesSection.style.display = 'none';
            }

            if (hobbies && hobbies.trim()) {
                if (preview.hobbies) preview.hobbies.innerHTML = hobbies.replace(/\n/g, '<br>');
                if (hobbiesSection) hobbiesSection.style.display = 'block';
            } else {
                if (hobbiesSection) hobbiesSection.style.display = 'none';
            }

            // Update photo - ensure it displays properly
            const photoElement = document.getElementById('previewPhoto');
            if (photoElement && photoDataUrl) {
                photoElement.src = photoDataUrl;
                photoElement.style.display = 'block';
                photoElement.onload = function() {
                    console.log('Photo loaded in preview');
                };
            } else if (photoElement) {
                photoElement.style.display = 'none';
            }
        }

        function loadSettingsData() {
            // Load current theme setting
            const isDarkMode = document.body.classList.contains('dark-mode');
            document.getElementById('darkModeToggle').checked = isDarkMode;
            
            // Update toggle appearance
            updateToggleAppearance('darkModeToggle', isDarkMode);
            
            // Load language setting
            loadLanguage();
        }

        function saveSettings() {
            const settings = {
                darkMode: document.body.classList.contains('dark-mode'),
                language: currentLanguage
            };
            
            localStorage.setItem('cvcraft_settings', JSON.stringify(settings));
            
            const message = currentLanguage === 'es' ? 
                '¡Configuración guardada exitosamente!' : 
                'Settings saved successfully!';
            showNotification(message, 'success');
        }

        // Initialize everything
        loadTheme();
        loadLanguage();
        updatePreview();
        checkAuthStatus();
        checkPendingPayment();
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'97038d32b74011be',t:'MTc1NTM3NDc3OS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
